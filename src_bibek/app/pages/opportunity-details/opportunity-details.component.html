<main class="content">
    <div class="container-fluid p-0">
        <div class="row mb-2 mb-lg-4">
            <div class="col-md-12 d-lg-flex align-items-center main-hdng">
                <div class="col-md-6">
                    <h3>Opportunity Details</h3>
                </div>
                <div class="col-md-6">
                    <div class="">
                        <nav style="--bs-breadcrumb-divider: '';" aria-label="breadcrumb">
                            <ol class="breadcrumb justify-content-end">
                                <li class="breadcrumb-item active"><a>Opportunity</a></li>
                                <li class="breadcrumb-item active" aria-current="page">{{opportunityName}}</li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mb-2 mb-lg-4">
            <div class="col-md-12 d-lg-flex align-items-center hdng-btm">
                <div class="col-md-6">
                    <a class="btn btn-primary btn-lg me-3" (click)="backToPreviousPage()">Back To List <i
                            class="fas fa-chevron-left"></i></a>
                </div>
                <div class="col-md-6 text-end mt-n1">
                    <ul class="list-inline ml-auto mt-3 mt-lg-0 mb-0">


                        <!-- <li class="list-inline-item">
                            <button class="btn btn-primary btn-lg" (click)="addApportunity()">Add New <i
                                    class="fas fa-plus"></i>
                            </button>
                        </li> -->


                        <!-- <li class="list-inline-item me-1 icon-border">
                            <a class="btn btn-outline-dark rounded-3 btn-xs" href="javascript:void(0)"
                                data-bs-toggle="tooltip" data-bs-placement="bottom" title="Print">
                                <img src="assets/images/printer.svg" alt="printer"></a>
                        </li> -->

                        <!-- <li class="list-inline-item me-1 icon-border">
                            <a class="btn btn-outline-dark rounded-3 btn-xs" (click)="editOpportunity()"
                                data-bs-toggle="tooltip" data-bs-placement="bottom" title="Edit">
                                <img src="assets/images/pen.svg" alt="pen"></a>
                        </li> -->


                        <!-- <li class="list-inline-item me-1 icon-border">
                            <a class="btn btn-outline-dark rounded-3 btn-xs" href="javascript:void(0)"
                                data-bs-target="#opportunityscheduleModal" data-bs-toggle="modal"
                                data-bs-dismiss="modal">
                                <img src="assets/images/calendar-days.svg" alt="calendar" data-bs-toggle="tooltip"
                                    data-bs-placement="bottom" title="Schedule"></a>
                        </li> -->


                        <!-- <li class="list-inline-item me-1 icon-border">
                            <a class="btn btn-outline-dark rounded-3 btn-xs" href="javascript:void(0)"
                                data-bs-toggle="tooltip" data-bs-placement="bottom" title="portrait">
                                <img src="assets/images/iphone-portrait.svg" alt="iphone"></a>
                        </li> -->

                        <!-- <li class="list-inline-item me-1 icon-border">
                            <a class="btn btn-outline-dark rounded-3 btn-xs" href="javascript:void(0)"
                                data-bs-toggle="tooltip" data-bs-placement="bottom" title="Email">
                                <img src="assets/images/mail.svg" alt="mail"></a>
                        </li> -->


                        <!-- <li class="list-inline-item icon-border me-0">
                            <a class="px-0 border-0 d-inline-block align-middle dropdown-toggle no-dropdown-arrow"
                               href="javascript:void(0)" data-bs-toggle="dropdown" aria-expanded="false">
                                <img src="assets/images/hdr-menu-vertical.svg" alt="menu-vertical"
                                     data-bs-toggle="tooltip" data-bs-placement="bottom" title="More"></a>
                            <div class="dropdown-menu dropdown-menu-end" style="">
                                <a class="dropdown-item" href="javascript:void(0)">Edit this Opportunity</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0)">Change Opportunity image</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0)">Delete</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0)">Email this Opportunity</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0)">Clone</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0)">Follow this Opportunity</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0)">Convert this Opportunity</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0)">Add activity</a>
                            </div>
                        </li> -->

                        <!-- <li class="list-inline-item icon-border me-0">
                            <a class="d-inline-block align-middle" mat-button [matMenuTriggerFor]="menu">
                                <img src="assets/images/hdr-menu-vertical.svg" alt="trash"></a>
                            <mat-menu #menu="matMenu">
                                <button mat-menu-item>Edit this Opportunity</button>
                                <button mat-menu-item>Change Opportunity image</button>
                                <button mat-menu-item>Delete</button>
                                <button mat-menu-item>Email this Opportunity</button>
                                <button mat-menu-item>Clone</button>
                                <button mat-menu-item>Follow this Opportunity</button>
                                <button mat-menu-item>Convert this Opportunity</button>
                                <button mat-menu-item>Add activity</button>
                            </mat-menu>
                        </li> -->
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="bg-white shadow-lg py-3 px-3 rounded-top-lg profile-details">
                    <div class="row align-items-center">
                        <div class="col-md-7">
                            <div class="d-inline-block align-middle me-3">
                                <img src="assets/images/icon-park_target-one.png" alt="profile-img">
                            </div>
                            <div class="d-inline-block align-middle">
                                <h4>{{opportunityName}}</h4>
                                <span class="price">{{expectedRevenue}} INR</span>
                            </div>
                        </div>
                        <div class="col-md-3 d-md-flex">
                            <div class="d-inline-block align-middle">
                                <img src="assets/images/profile_iphone-portrait.svg" alt="iphone-portrait">
                            </div>
                            <div class="d-inline-block align-middle">
                                <h6 class="ph_txt">Phone number</h6>
                                <h6 class="ph_no">{{ORG_phone}}</h6>
                            </div>
                        </div>
                        <!-- <div class="col-md-2">
                            <div class="">
                                <div class="d-block">
                                    <h6 class="ph_txt text-end">Folllow</h6>
                                </div>
                                <div class="d-block">
                                    <img src="assets/images/heart.svg" alt="Folllow" class="ms-auto">
                                </div>
                            </div>
                        </div> -->
                        <div class="col-auto d-block ms-auto">
                            <div class="text-end mt-n4">
                                <h5 class="profile-status ">Status :
                                    <!-- class="dropdown-toggle"
                                       data-bs-toggle="dropdown" aria-expanded="false" mat-button [matMenuTriggerFor]="activemenu" -->

                                    <!--<mat-menu #activemenu="matMenu">
                                        <button mat-menu-item (click)="stageCompleteModal()">Not Contacted</button>
                                        <button mat-menu-item (click)="stageCompleteModal()">Attempted Contact</button>
                                        <button mat-menu-item (click)="stageCompleteModal()">Contacted</button>
                                        <button mat-menu-item (click)="stageCompleteModal()">Converted</button>
                                    </mat-menu>-->
                                    <ng-container  *ngIf="permissionData.editPem == 0">
                                        <span class="text-success pe-2">{{oppStatusName}}</span>
                                        </ng-container>

                                        <ng-container  *ngIf="permissionData.editPem == 1">
                                    <a class="dropdown-toggle" mat-button [matMenuTriggerFor]="activemenu"
                                        data-bs-toggle="dropdown" aria-expanded="false">

                                        <!-- <span class="text-success pe-2">{{oppStatusType}}</span> -->

                                        

                                        <!-- <span class="text-success pe-2" *ngIf="oppStatusType == '1'">Warm</span>
                                        <span class="text-success pe-2" *ngIf="oppStatusType == '2'">Cold</span>
                                        <span class="text-success pe-2" *ngIf="oppStatusType == '3'">Hot</span> -->
                                    </a>
                                    <mat-menu #activemenu="matMenu">
                                   

                                        <button mat-menu-item *ngFor="let obj of natureList"
                                            (click)="statusChange(obj.id)">{{obj.name}}</button>

                                  

                                        <!-- <button mat-menu-item (click)="statusChange(2)">Cold</button>
                                        <button mat-menu-item (click)="statusChange(3)">Hot</button> -->
                                    </mat-menu>
                                </ng-container>
                                
                                </h5>
                            </div>
                        </div>
                    </div>
                </div>
                <div
                    class="bg-white shadow-lg py-3 px-3 rounded-bottom-lg mb-4 profile-details border-top border-dark position-relative">
                    <div class="row align-items-center mt-3">
                        <div class="col-md-3">
                            <span class="related_badge">Related to</span>
                            <div class="row">
                                <div class="col-md-3 ">
                                    <img src="assets/images/organization-profile.png" alt="profile-img">
                                </div>
                                <div class="col-md-9">
                                    <h6 class="ph_txt">Organization name</h6>
                                    <h6 class="ph_no">{{ORG_name}}</h6>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-9">
                            <div class="d-md-flex align-items-center">
                                <div class="col-auto d-block md-3 me-2">
                                    <div class="d-inline-block align-middle me-2">
                                        <img src="assets/images/opportunity-profile1.png" alt="profile-img">
                                    </div>
                                    <div class="d-inline-block align-middle me-2">
                                        <h6 class="ph_txt">Contact person</h6>
                                        <h6 class="ph_no">{{contactPersonName}}</h6>
                                    </div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                </div>
                                <div class="col-auto d-block md-3 me-2">
                                    <div class="d-inline-block align-middle me-2">
                                        <img src="assets/images/profile_calendar-day.svg" alt="profile_calendar">
                                    </div>
                                    <div class="d-inline-block align-middle me-2">
                                        <h6 class="ph_txt">Expected Close Date</h6>
                                        <h6 class="ph_no">{{expectedCloseDate}}</h6>
                                    </div>
                                </div> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                <div class="col-auto d-block md-3 me-2">
                                    <div class="d-inline-block align-middle me-2">
                                        <img src="assets/images/opportunity-profile2.png" alt="profile_calendar">
                                    </div>
                                    <div class="d-inline-block align-middle me-2">
                                        <h6 class="ph_txt">Assigned to</h6>
                                        <h6 class="ph_no">{{assignToUser}}</h6>
                                    </div>
                                </div> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                <div class="col-auto d-block md-3 me-2">
                                    <div class="d-inline-block align-middle me-2">
                                        <h6 class="ph_txt">Probability Of Winning</h6>
                                        <span class="text-success d-block"
                                            style="line-height: 16px;">{{winingValue}}%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mb-3 profile-navigation">
                    <div class="d-sm-flex align-items-center mb-3">
                        <div class="col-auto me-4">
                            <h4 *ngIf="salesStage != popUpShow">Current Stage: <span
                                    class="text-success">{{salesStageName}}</span></h4>
                            <h4 *ngIf="salesStage == popUpShow">Current Stage: <span
                                    class="text-success">Completed</span></h4>
                        </div>
                        <div class="col-auto">
                            <a class="btn btn-warning btn-xs" (click)="finalOppStageMarkAsComplete()"
                                *ngIf="!oppStageUpdateFlag && salesStage != popUpShow">Mark
                                This Stage As Completed</a>
                            <a class="btn btn-warning btn-xs" (click)="finalStageChange()"
                                *ngIf="oppStageUpdateFlag">Change</a>
                        </div>
                    </div>
                    <div class="details-navigation customSetails-navigation">
                        <ul>
                            <!-- <li class="stage_0" [ngClass]="salesStage < data.sequence ? 'active' : '' "
                                *ngFor="let data of salesStageArray; let i = index" id="oppStage_{{data.salesStageId}}">
                                <a href="javascript:void(0)" (click)="finalStageName(data.sequence)">
                                    {{data.salesStageName}}</a>
                            </li> -->


                            <li class="stage_0" [ngClass]="salesStage >= data.salesStageId ? '' : 'active' "
                                *ngFor="let data of salesStageArray; let i = index" id="oppStage_{{data.salesStageId}}">
                                <a href="javascript:void(0)" (click)="finalStageName(data.salesStageId)">
                                    {{data.salesStageName}}</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="bg-white shadow-lg py-4 px-4 rounded-3 mb-3" *ngIf="!oppTable && oppStageTable">
                    <div id="datatables-reponsive_wrapper" class="dataTables_wrapper dt-bootstrap5 no-footer">
                        <div class="d-md-flex align-items-center mb-3">
                            <div class="col-auto d-block">
                                <h4>Stage Details</h4>
                            </div>
                            <div class="col-auto d-block ms-auto">
                                <div class="text-center">
                                    <!-- <div class="dataTables_length" id="datatables-reponsive_length">
                                        <label>
                                            Records per page
                                            <select name="datatables-reponsive_length"
                                                aria-controls="datatables-reponsive" class="form-select form-select-sm">
                                                <option value="10">10</option>
                                                <option value="15">15</option>
                                                <option value="30">20</option>
                                                <option value="30">30</option>
                                                <option value="50">50</option>
                                            </select>
                                            1 - 10
                                        </label>
                                        <label>
                                            <a class="px-1 d-inline-block align-middle" href="javascript:void(0)">
                                                <img src="assets/images/chevron-left.svg" alt="chevron-left"></a>
                                            <a class="px-1 d-inline-block align-middle" href="javascript:void(0)">
                                                <img src="assets/images/chevron-right.svg" alt="chevron-right"></a>
                                        </label>
                                    </div> -->
                                </div>
                            </div>
                            <div class="btn-group btn-group-sm ms-auto  btn-download-group">
                                <button type="button" class="btn btn-md bg-white px-4">CSV</button>
                                <button type="button" class="btn bg-white px-4">PDF</button>
                                <button type="button" class="btn bg-white px-4">Excel</button>
                                <!-- <button type="button" class="btn bg-white px-4">Upload</button> -->
                                <button type="button" class="ps-2 dropdown-toggle no-dropdown-arrow"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    <img src="assets/images/filtering.svg" alt="filtering"></button>
                                <div class="dropdown-menu dropdown-menu-end addDropdownhead">
                                    <a class="dropdown-item d-md-flex align-items-center" href="javascript:void(0)">
                                        <span class="col-auto d-block me-2">Stage</span>
                                        <div class="form-check form-switch col-auto d-block ms-auto">
                                            <input class="form-check-input" type="checkbox" id="switch1">
                                        </div>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item d-md-flex align-items-center" href="javascript:void(0)">
                                        <span class="col-auto d-block me-2">Amount</span>
                                        <div class="form-check form-switch col-auto d-block ms-auto">
                                            <input class="form-check-input" type="checkbox" id="switch2">
                                        </div>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item d-md-flex align-items-center" href="javascript:void(0)">
                                        <span class="col-auto d-block me-2">Probability</span>
                                        <div class="form-check form-switch col-auto d-block ms-auto">
                                            <input class="form-check-input" type="checkbox" id="switch3">
                                        </div>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item d-md-flex align-items-center" href="javascript:void(0)">
                                        <span class="col-auto d-block me-2">Expected Revenue</span>
                                        <div class="form-check form-switch col-auto d-block ms-auto">
                                            <input class="form-check-input" type="checkbox" id="switch4">
                                        </div>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item d-md-flex align-items-center" href="javascript:void(0)">
                                        <span class="col-auto d-block me-2">Expected Closing Date</span>
                                        <div class="form-check form-switch col-auto d-block ms-auto">
                                            <input class="form-check-input" type="checkbox" id="switch5">
                                        </div>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item d-md-flex align-items-center" href="javascript:void(0)">
                                        <span class="col-auto d-block me-2">Stage Duration</span>
                                        <div class="form-check form-switch col-auto d-block ms-auto">
                                            <input class="form-check-input" type="checkbox" id="switch6">
                                        </div>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item d-md-flex align-items-center" href="javascript:void(0)">
                                        <span class="col-auto d-block me-2">Modified Time</span>
                                        <div class="form-check form-switch col-auto d-block ms-auto">
                                            <input class="form-check-input" type="checkbox" id="switch7">
                                        </div>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item d-md-flex align-items-center" href="javascript:void(0)">
                                        <span class="col-auto d-block me-2">Modified By</span>
                                        <div class="form-check form-switch col-auto d-block ms-auto">
                                            <input class="form-check-input" type="checkbox" id="switch8">
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table id="datatables-column-search-select-inputs" class="table table-striped dataTable"
                                style="width: 100%;" aria-describedby="datatables-column-search-select-inputs_info">
                                <thead class="thead-dark" *ngIf="oppStageTable">
                                    <tr role="row">
                                        <th class="sorting align-middle">Amount</th>
                                        <th class="sorting align-middle">Probability Of Wining(%)</th>
                                        <th class="sorting align-middle">Expected Revenue</th>
                                        <th class="sorting align-middle">Expected Closing Date</th>
                                        <th class="sorting align-middle">Follow Up Date</th>
                                        <!-- <th class="sorting align-middle">Decesion Maker Name</th> -->
                                        <!-- <th class="sorting align-middle">Designation</th> -->
                                        <!-- <th class="sorting align-middle">Authority Capability</th> -->
                                        <th class="sorting align-middle">Proposal Value</th>
                                        <th class="sorting align-middle">Proposal Number</th>
                                        <th class="sorting align-middle">Proposal Sent Date</th>
                                        <th class="sorting align-middle">Next Follow Up Date</th>
                                        <th class="sorting align-middle">Customer Proposed Value</th>
                                        <th class="sorting align-middle">Mutually Agreed Contact Value</th>
                                        <th class="sorting align-middle">Close Amount</th>
                                        <th class="sorting align-middle">Close Date</th>
                                        <th class="sorting align-middle">Close Reason</th>
                                        <th class="sorting align-middle">Close Description</th>
                                        <th class="sorting align-middle">Modified By</th>
                                        <th class="sorting align-middle">Modified At</th>
                                    </tr>
                                </thead>


                                <tbody *ngIf="oppStageTable">
                                    <tr *ngIf="oppStageData.length == 0">
                                        <td colspan="8" style="text-align: center;">Non of stage complete till now</td>
                                    </tr>
                                    <tr role="row" class="" *ngFor="let data of oppStageData; let i = index;"
                                        [ngClass]="(i+1)% 2 != 0 ? 'odd' : 'even'">
                                        <td class="align-middle">{{data.amount}}</td>
                                        <td class="align-middle">{{data.probOfWin}}</td>
                                        <td class="align-middle">{{data.expectedRevenue}}</td>
                                        <td class="align-middle">{{data.expectedClosingDate | date:'dd-MM-yyyy'}}</td>
                                        <td class="align-middle">{{data.followUpDate | date:'dd-MM-yyyy'}}</td>


                                        <!-- <td class="align-middle">{{data.decisionMakerName1}} {{data.decisionMakerName2}}
                                            {{data.decisionMakerName3}}</td>
                                        <td class="align-middle">{{data.decisionMakerDesignation1}}
                                            {{data.decisionMakerDesignation2}} {{data.decisionMakerDesignation3}}</td>


                                        <td class="align-middle" *ngIf="data.decisionMakerAuth1 == '1'">Top Management
                                        </td>
                                        <td class="align-middle" *ngIf="data.decisionMakerAuth1 == '2'">Medium
                                            Management</td>
                                        <td class="align-middle" *ngIf="data.decisionMakerAuth1 == '3'">Low Management
                                        </td> -->


                                        <td class="align-middle">{{data.proposalValue}}</td>
                                        <td class="align-middle">{{data.proposalNumber}}</td>
                                        <td class="align-middle">{{data.proposalSentDate | date:'dd-MM-yyyy'}}</td>
                                        <td class="align-middle">{{data.nextFollowUpDate | date:'dd-MM-yyyy'}}</td>
                                        <td class="align-middle">{{data.proposedValueByCust}}</td>
                                        <td class="align-middle">{{data.mutuaagredContactvAL}}</td>
                                        <td class="align-middle">{{data.closeAmount}}</td>
                                        <td class="align-middle">{{data.closeDate | date :'dd-MM-yyyy'}}</td>
                                        <td class="align-middle" *ngIf="data.closeReason == '0'"></td>
                                        <td class="align-middle" *ngIf="data.closeReason == '1'">Not Interested</td>
                                        <td class="align-middle" *ngIf="data.closeReason == '2'">Price Too High</td>
                                        <td class="align-middle" *ngIf="data.closeReason == '3'">Product Quality</td>
                                        <td class="align-middle">{{data.closeDescription}}</td>
                                        <td class="align-middle">{{data.createdByUserName}}</td>
                                        <td class="align-middle">{{data.createdAt | date:'dd-MM-yyyy'}}</td>
                                    </tr>

                                </tbody>

                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="bg-white shadow-lg py-3 px-3 rounded-3 profile-details-info">
                    <div class="hdr d-md-flex align-items-center mb-3">
                        <div class="col-auto d-block">
                            <h3>Detail informations</h3>
                        </div>
                    </div>
                    <div class="accordion" id="accordionExamplebuisness">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingbuisnessOne">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapsebuisnessOne" aria-expanded="true"
                                    aria-controls="collapsebuisnessOne">Details
                                </button>
                            </h2>
                            <div id="collapsebuisnessOne" class="accordion-collapse collapse show"
                                aria-labelledby="headingbuisnessOne" data-bs-parent="#accordionExamplebuisness">
                                <div class="accordion-body">
                                    <div class="details-info-inner">
                                        <table class="table table-sm table-borderless my-2">
                                            <tbody>
                                                <tr>
                                                    <th>Record ID :</th>
                                                    <td>{{recordId}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Opportunity name :</th>
                                                    <td>{{opportunityName}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Organization :</th>
                                                    <td>{{ORG_name}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Phone number :</th>
                                                    <td>{{ORG_phone}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Email address :</th>
                                                    <td>{{ORG_Email}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Contact person :</th>
                                                    <td>{{contactPersonName}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--<mat-accordion>
                            <mat-expansion-panel class="custonm-mat-expansion-panel" style="margin-bottom: 15px;"
                                                 [expanded]="isOpen">
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        Organization
                                    </mat-panel-title>
                                    <mat-panel-description>
                                    </mat-panel-description>
                                </mat-expansion-panel-header>
                                <div class="details-info-inner">
                                    <table class="table table-sm table-borderless my-2">
                                        <tbody>
                                        <tr>
                                            <th>Record ID :</th>
                                            <td>63969078</td>
                                        </tr>
                                        <tr>
                                            <th>Opportunity name :</th>
                                            <td>{{opportunityName}}</td>
                                        </tr>
                                        <tr>
                                            <th>Organization :</th>
                                            <td>{{ORG_name}}</td>
                                        </tr>
                                        <tr>
                                            <th>Phone number :</th>
                                            <td>{{ORG_phone}}</td>
                                        </tr>
                                        <tr>
                                            <th>Email address :</th>
                                            <td>{{ORG_Email}}</td>
                                        </tr>
                                        <tr>
                                            <th>Contact person :</th>
                                            <td>{{contactPersonName}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </mat-expansion-panel>
                        </mat-accordion>-->


                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingbuisnessTwo">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapsebuisnessTwo" aria-expanded="false"
                                    aria-controls="collapsebuisnessTwo">Additional Information
                                </button>
                            </h2>
                            <div id="collapsebuisnessTwo" class="accordion-collapse collapse"
                                aria-labelledby="headingbuisnessTwo" data-bs-parent="#accordionExamplebuisness">
                                <div class="accordion-body">
                                    <div class="details-info-inner">
                                        <table class="table table-sm table-borderless my-2">
                                            <tbody>
                                                <tr>
                                                    <th>Category :</th>
                                                    <td>
                                                        <span *ngIf="Oppcategory == 0">New Business</span>
                                                        <span *ngIf="Oppcategory == 1">Existing Business</span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>Opportunity created :</th>
                                                    <td>{{opportunityCreatedAt}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Expected close date :</th>
                                                    <td>{{expectedCloseDate}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Actual close date :</th>
                                                    <td>{{ActualCloseDate}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Expected revenue :</th>
                                                    <td>{{expectedRevenue}} INR</td>
                                                </tr>
                                                <tr>
                                                    <th>Stage Duration :</th>
                                                    <td>72 Hours</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--<mat-accordion>
                            <mat-expansion-panel class="custonm-mat-expansion-panel" style="margin-bottom: 15px;">
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        Additional Information
                                    </mat-panel-title>
                                    <mat-panel-description>
                                    </mat-panel-description>
                                </mat-expansion-panel-header>
                                <div class="details-info-inner">
                                    <table class="table table-sm table-borderless my-2">
                                        <tbody>
                                        <tr>
                                            <th>Category :</th>
                                            <td>
                                                <span *ngIf="Oppcategory == 0">New Business</span>
                                                <span *ngIf="Oppcategory == 1">Existing Business</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>Opportunity created :</th>
                                            <td>{{opportunityCreatedAt}}</td>
                                        </tr>
                                        <tr>
                                            <th>Expected close date :</th>
                                            <td>{{expectedCloseDate}}</td>
                                        </tr>
                                        <tr>
                                            <th>Actual close date :</th>
                                            <td>{{ActualCloseDate}}</td>
                                        </tr>
                                        <tr>
                                            <th>Expected revenue :</th>
                                            <td>{{expectedRevenue}} INR</td>
                                        </tr>
                                        <tr>
                                            <th>Stage Duration :</th>
                                            <td>72 Hours</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </mat-expansion-panel>
                        </mat-accordion>-->
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingbuisnessThree">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapsebuisnessThree" aria-expanded="false"
                                    aria-controls="collapsebuisnessThree">Description
                                </button>
                            </h2>
                            <div id="collapsebuisnessThree" class="accordion-collapse collapse"
                                aria-labelledby="headingbuisnessThree" data-bs-parent="#accordionExamplebuisness">
                                <div class="accordion-body">
                                    <div class="details-info-inner">
                                        <table class="table table-sm table-borderless my-2">
                                            <tbody>
                                                <tr>
                                                    <td>{{description}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--<mat-accordion>
                            <mat-expansion-panel class="custonm-mat-expansion-panel" style="margin-bottom: 15px;">
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        Description
                                    </mat-panel-title>
                                    <mat-panel-description>
                                    </mat-panel-description>
                                </mat-expansion-panel-header>
                                <div class="details-info-inner">
                                    <table class="table table-sm table-borderless my-2">
                                        <tbody>
                                        <tr>
                                            <td>{{description}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </mat-expansion-panel>
                        </mat-accordion>-->
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingbuisnessFour">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapsebuisnessFour" aria-expanded="false"
                                    aria-controls="collapsebuisnessFour">Interested Items
                                </button>
                            </h2>
                            <div id="collapsebuisnessFour" class="accordion-collapse collapse"
                                aria-labelledby="headingbuisnessFour" data-bs-parent="#accordionExamplebuisness">
                                <div class="accordion-body">
                                    <div class="details-info-inner">
                                        <table class="table table-sm table-borderless my-2">
                                            <tbody>
                                                <tr>
                                                    <th>Item name :</th>
                                                    <td>{{actualProductName}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Qty :</th>
                                                    <td>{{productQtn}}</td>
                                                </tr>
                                                <tr>
                                                    <th>List price :</th>
                                                    <td>{{listValue}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Discount added :</th>
                                                    <td>{{discount}}%</td>
                                                </tr>
                                                <tr>
                                                    <th>Total :</th>
                                                    <td>{{finalValue}} INR</td>
                                                </tr>
                                                <!--<tr>
                                                <th>Stage Duration :</th>
                                                <td>72 Hours</td>
                                            </tr> -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--<mat-accordion>
                            <mat-expansion-panel class="custonm-mat-expansion-panel" style="margin-bottom: 15px;">
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        Interested Items
                                    </mat-panel-title>
                                    <mat-panel-description>
                                    </mat-panel-description>
                                </mat-expansion-panel-header>
                                <div class="details-info-inner">
                                    <table class="table table-sm table-borderless my-2">
                                        <tbody>
                                        <tr>
                                            <th>Item name :</th>
                                            <td>{{actualProductName}}</td>
                                        </tr>
                                        <tr>
                                            <th>Qty :</th>
                                            <td>{{productQtn}}</td>
                                        </tr>
                                        <tr>
                                            <th>List price :</th>
                                            <td>{{listValue}}</td>
                                        </tr>
                                        <tr>
                                            <th>Discount added :</th>
                                            <td>{{discount}}%</td>
                                        </tr>
                                        <tr>
                                            <th>Total :</th>
                                            <td>{{finalValue}} INR</td>
                                        </tr>
                                        &lt;!&ndash; <tr>
                                        <th>Stage Duration :</th>
                                        <td>72 Hours</td>
                                        </tr> &ndash;&gt;
                                        </tbody>
                                    </table>
                                </div>
                            </mat-expansion-panel>
                        </mat-accordion>-->
                    </div>
                    <div class="mt-2 text-start">
                        <!--       <button class="btn btn-warning btn-sm" data-bs-target="#opportunityscheduleModal" data-bs-toggle="modal" data-bs-dismiss="modal">Schedule Meeting <i class="fas fa-clock"></i></button>-->
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="bg-white shadow-lg py-3 px-3 rounded-3 mb-3 profile-details-info">
                    <div class="hdr d-md-flex align-items-center mb-3 lead-hdr">
                        <div class="col-auto d-block">
                            <h3>Activities</h3>
                        </div>
                        <div class="col-auto d-block ms-auto">
                            <ul class="nav nav-pills " id="pills-tab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" [ngClass]="activityTypeData=='past'? 'active' : ''"
                                        id="pills-activitypast-tab" data-bs-toggle="pill"
                                        data-bs-target="#pills-activity-past" type="button" role="tab"
                                        aria-controls="pills-activity-past" aria-selected="false"
                                        (click)="pastActivity()">Past</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" [ngClass]="activityTypeData=='up'? 'active' : ''"
                                        id="pills-activityupcoming-tab" data-bs-toggle="pill"
                                        data-bs-target="#pills-activity-upcoming" type="button" role="tab"
                                        aria-controls="pills-activity-upcoming" aria-selected="true"
                                        (click)="upcomingActivity()">Upcoming</button>
                                </li>
                            </ul>

                        </div>
                    </div>
                    <div class="lead-details-info-inner">
                        <div class="tab-content" id="pills-activity-tabContent">

                            <div class="tab-pane fade show active" id="pills-activity-past" role="tabpanel"
                                aria-labelledby="pills-activitypast-tab">
                                <div class="table-responsive">
                                    <table id="datatables-column-search-select-inputs"
                                        class="table table-striped dataTable" style="width: 100%;"
                                        aria-describedby="datatables-column-search-select-inputs_info">
                                        <thead class="thead-dark">
                                            <tr role="row">
                                                <th class="align-middle">Type</th>
                                                <th class="align-middle">Date Due</th>
                                                <th class="align-middle">Assigned to</th>
                                                <th width="40px">&nbsp;</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngIf="allActivityArray.length === 0">
                                                <td colspan="4" class="text-center">You have to added any activity yet.
                                                </td>
                                            </tr>
                                            <tr role="row" class=""
                                                *ngFor="let item of allActivityArray; let i = index;"
                                                [ngClass]="(i+1)%2 != 0 ? 'odd':'even'">
                                                <!-- <tbody *ngIf="activityStatus">
                                                <tr role="row" class="odd" *ngFor = "let item of upActivityList"> -->
                                                <td class="align-middle">{{item.activityTypeName}}</td>
                                                <td class="align-middle">{{item.dueDate | date:'dd-MM-yyyy'}}</td>
                                                <td class="align-middle">{{item.firstName}}</td>
                                                <td width="40px" class="align-middle">
                                                    <!--<a
                                                    class="d-inline-block align-middle">
                                                    <img src="assets/images/paper-plane-alt.svg" alt="chat"></a>-->
                                                    <a class="d-inline-block align-middle" mat-button
                                                        [matMenuTriggerFor]="menu">
                                                        <img src="assets/images/menu-vertical.svg" alt="trash"></a>
                                                    <mat-menu #menu="matMenu">
                                                        <!-- <button mat-menu-item>View details</button> -->
                                                        <button mat-menu-item (click)="cancelActivity(item.id)">
                                                            Cancel this task
                                                        </button>
                                                        <button mat-menu-item (click)="completeTusk(item.id)">Mark
                                                            as completed
                                                        </button>

                                                    </mat-menu>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="text-center">

                                    <button type="button" class="px-1 d-inline-block align-middle no-bg"
                                        [disabled]="isPrevious" (click)="previous()">
                                        <img src="assets/images/chevron-left.svg" alt="chevron-left"></button>
                                    <button type="button" class="px-1 d-inline-block align-middle no-bg"
                                        [disabled]="isdisable" (click)="next()">
                                        <img src="assets/images/chevron-right.svg" alt="chevron-right"></button>
                                </div>

                            </div>
                            <!--  <div class="tab-pane fade show active" id="pills-activity-past" role="tabpanel"
                                 aria-labelledby="pills-activitypast-tab">
                                <table class="table table-striped dataTable" style="width: 100%;"
                                       aria-describedby="datatables-column-search-select-inputs_info">
                                    <thead class="thead-dark">
                                    <tr role="row">
                                        <th class="sorting align-middle">Type</th>
                                        <th class="sorting align-middle">Date Due</th>
                                        <th class="sorting align-middle">Assigned to</th>
                                        <th width="40px">&nbsp;</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr *ngIf="allActivityArray.length == 0">
                                        <td colspan="4" style="text-align: center;">No Activity Found</td>
                                    </tr>
                                    <tr role="row" class="odd" *ngFor="let data of allActivityArray">
                                        <td class="align-middle">{{data.activityTypeName}}</td>
                                        <td class="align-middle">{{data.dueDate}}</td>
                                        <td class="align-middle">{{data.firstName}} {{data.lastName}}</td>
                                        <td width="40px" class="align-middle">
                                            <a class="d-inline-block align-middle" href="javascript:void(0)">
                                                <img src="assets/images/paper-plane-alt.svg" alt="chat"></a>
                                             <a class="d-inline-block align-middle dropdown-toggle no-dropdown-arrow" href="javascript:void(0)" data-bs-toggle="dropdown" aria-expanded="false">
                                            <img src="assets/images/menu-vertical.svg" alt="menu"></a> -->
                            <!-- <div class="dropdown-menu dropdown-menu-end">
                                            <a class="dropdown-item" href="javascript:void(0)">View details</a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item" href="javascript:void(0)">Cancel this task</a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item" href="javascript:void(0)">Add new task</a>
                                            </div> 
                                            <div class="col-auto d-block ms-auto">
                                                <div class="text-end mt-n4">
                                                    <h5 class="profile-status ">
                                                        <a class="dropdown-toggle" mat-button
                                                           [matMenuTriggerFor]="activemenu" data-bs-toggle="dropdown"
                                                           aria-expanded="false">
                                                            <span class="text-success pe-2">abc</span> 
                                                        </a>
                                                        <mat-menu #activemenu="matMenu">
                                                            <button mat-menu-item>View details</button> 
                                                            <button mat-menu-item (click)="cancelActivity(data.id)">
                                                                Cancel this task
                                                            </button>
                                                            <button mat-menu-item (click)="completeTusk(data.id)">Mark
                                                                as completed
                                                            </button>
                                                        </mat-menu>
                                                    </h5>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="tab-pane fade" id="pills-activity-upcoming" role="tabpanel"
                                 aria-labelledby="pills-activityupcoming-tab">
                                <table id="datatables-column-search-select-inputs" class="table table-striped dataTable"
                                       style="width: 100%;"
                                       aria-describedby="datatables-column-search-select-inputs_info">
                                    <thead class="thead-dark">
                                    <tr role="row">
                                        <th class="sorting align-middle">Type</th>
                                        <th class="sorting align-middle">Date Due</th>
                                        <th class="sorting align-middle">Assigned to</th>
                                        <th width="40px">&nbsp;</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                         <tr *ngIf="allActivityArray.length == 0">
                                        <td colspan="4" style="text-align: center;">No Activity Found</td>
                                    </tr>
                                    <tr role="row" class="odd" *ngFor="let data of allActivityArray">
                                        <td class="align-middle">{{data.activityTypeName}}</td>
                                        <td class="align-middle">{{data.dueDate}}</td>
                                        <td class="align-middle">{{data.firstName}} {{data.lastName}}</td>
                                        <td width="40px" class="align-middle">
                                            <a class="d-inline-block align-middle" href="javascript:void(0)">
                                                <img src="assets/images/paper-plane-alt.svg" alt="chat"></a>
                                            <a class="d-inline-block align-middle dropdown-toggle no-dropdown-arrow" href="javascript:void(0)" data-bs-toggle="dropdown" aria-expanded="false">
                                            <img src="assets/images/menu-vertical.svg" alt="menu"></a> 
                                            <div class="dropdown-menu dropdown-menu-end">
                                            <a class="dropdown-item" href="javascript:void(0)">View details</a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item" href="javascript:void(0)">Cancel this task</a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item" href="javascript:void(0)">Add new task</a>
                                            </div> 
                                            <div class="col-auto d-block ms-auto">
                                                <div class="text-end mt-n4">
                                                    <h5 class="profile-status ">
                                                        <a class="dropdown-toggle" mat-button
                                                           [matMenuTriggerFor]="activemenu" data-bs-toggle="dropdown"
                                                           aria-expanded="false">
                                                             <span class="text-success pe-2">abc</span> 
                                                        </a>
                                                        <mat-menu #activemenu="matMenu">
                                                             <button mat-menu-item>View details</button> 
                                                            <button mat-menu-item (click)="cancelActivity(data.id)">
                                                                Cancel this task
                                                            </button>
                                                            <button mat-menu-item (click)="completeTusk(data.id)">Mark
                                                                as completed
                                                            </button>
                                                        </mat-menu>
                                                    </h5>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                   
                             
                                    </tbody>
                                </table>
                            </div> -->
                        </div>
                        <div class="mt-4 text-start">
                            <a (click)="addActivityFunc()" class="btn btn-warning btn-sm" *ngIf="permissionData.addPem == 1">Add Activity <i
                                    class="fas fa-plus"></i></a>
                        </div>
                    </div>
                </div>
                <!--<div class="bg-white shadow-lg py-3 px-3 rounded-3 profile-details-info mb-3">
                    <div class="hdr d-md-flex align-items-center">
                        <div class="col-auto d-block">
                            <h3>Invoice :</h3>
                        </div>
                        <div class="col-auto d-block ms-3">
                            <strong class="profile_invoice_price text-danger">0</strong>
                        </div>
                    </div>
                </div>-->
                <div class="bg-white shadow-lg py-3 px-3 rounded-3 profile-details-info mb-3">
                    <div class="hdr d-xl-flex align-items-center mb-3">
                        <div class="col-auto d-block">
                            <h3>Opportunity Ownership</h3>
                        </div>
                    </div>
                    <div class="lead-details-info-inner pad-sm-table">
                        <table class="table table-sm table-borderless my-2">
                            <tbody>
                                <tr>
                                    <th>Source :</th>
                                    <td>Lead Convert</td>
                                </tr>
                                <tr>
                                    <th>Assigned user :</th>
                                    <td>{{assignToUser}}</td>
                                </tr>
                                <!-- <tr>
                            <th>Assigned team :</th>
                            <td>Sales Team Bravo</td>
                            </tr> -->
                            </tbody>
                        </table>
                        <!-- <div class="mt-2 text-start">
                            <button class="btn btn-secondary btn-xs">Update <i class="fas fa-pen"></i></button>
                        </div> -->
                    </div>
                </div>
                <div class="bg-white shadow-lg py-3 px-3 rounded-3 profile-details-info mb-3">
                    <div class="hdr d-xl-flex align-items-center mb-3">
                        <div class="col-auto d-block">
                            <h3>Competitor</h3>
                        </div>
                    </div>
                    <div class="lead-details-info-inner pad-sm-table">
                        <table class="table table-sm table-borderless my-2">
                            <tbody *ngFor="let data of currentCompetitor">
                                <tr>
                                    <th width="140px">Name :</th>
                                    <td>{{data.productName}}</td>
                                </tr>
                                <tr>
                                    <th width="140px">Description :</th>
                                    <td>{{data.desc}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>



<!----------------  Add Activity ----------------->


<ng-template #addActivity>
    <div class="modal-content">
        <div class="modal-header">
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col-10">
                        <h3>Add Activity</h3>
                    </div>
                    <div class="col-2 d-flex justify-content-end">
                        <button type="button" data-bs-dismiss="modal" aria-label="Close" class="btn-close"
                            (click)="modalClose()"></button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-body">
            <div class="container-fluid">
                <div class="row justify-content-center">
                    <div class="col-12">
                        <!-- <h4>Present Stage Name : Need Analysis</h4> -->

                        <div class="col-12">
                            <label for="amount" class="form-label"><span class="text-danger">*</span>
                                Activity
                                Type</label>
                            <div class="input-group">
                                <select class="form-select" aria-label="Default select example" name="Quantity type"
                                    id="quantity_type" [(ngModel)]="activityType">
                                    <option value="" selected="">Activity Type</option>
                                    <option *ngFor="let data of activityMasterArray" value="{{data.activityId}}">
                                        {{data.activiryName}}</option>
                                    <!-- <option value="2">Phone</option> -->
                                </select>
                            </div>
                        </div>
                        <div class="col-12">
                            <label for="probablity_wining" class="form-label"><span class="text-danger">*</span>Due
                                Date</label>
                            <div class="input-group">
                                <input type="date" name="amount" class="form-control" id="probablity_wining"
                                    [(ngModel)]="dueDate">
                            </div>
                        </div>
                        <div class="col-md-12" [hidden]="ActivityassignHide">
                            <label for="parmissionType" class="form-label">Select User</label>
                            <div class="input-group">
                                <select class="form-select" aria-label="Default select example" id="status_type"
                                    [(ngModel)]="ActivityassignTo">
                                    <option value="">Select user</option>
                                    <option *ngFor="let data of allUser" value="{{data.userId}}">
                                        {{data.firstName}}
                                        {{data.lastName}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-12">
                            <label for="expected_revenue" class="form-label"><span class="text-danger">*</span>
                                Description</label>
                            <div class="input-group">
                                <textarea name="Address" class="form-control" id="address_popup" rows="7"
                                    style="height:200px" [(ngModel)]="activitydescription"
                                    onkeypress="if(this.value.length > 100) return false;"></textarea>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <button class="btn btn-success" type="button" (click)="addActivityopp()">Submit <i
                                    class="fas fa-chevron-circle-right"></i></button>
                        </div><br>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>


<!-- ------------------------  Final opportunity Stage Mark As Completed------------------->

<ng-template #finalOppStageMarkComplete>
    <div class="modal-content">
        <div class="modal-header">
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col-10">
                        <h3>Mark This Stage As Completed</h3>
                    </div>
                    <div class="col-2 d-flex justify-content-end">
                        <button type="button" data-bs-dismiss="modal" aria-label="Close" class="btn-close"
                            (click)="modalClose()"></button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-body">
            <div class="container-fluid">
                <div class="row justify-content-center">
                    <h4 class="d-block">Present Stage Name : {{salesStageName}}</h4>

                    <div class="col-12" *ngIf = "!nextStageDropdown">
                        <label for="nextStage" class="form-label"><span class="text-danger">*</span>Next Target
                            Stage</label>
                        <div class="input-group">
                            <select class="form-select" [(ngModel)]="nextStage">
                                <option value="">Select next stage</option>
                                <option *ngFor="let item of finalStageList" [value]="item.salesStageId">
                                    {{item.salesStageName}}</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-12">
                        <label for="amount" class="form-label"><span class="text-danger">*</span> Amount</label>
                        <div class="input-group">
                            <input type="text" name="amount" class="form-control" [(ngModel)]="finalAmount"
                                onkeypress="if(event.which < 48 || event.which > 57 ) if(event.which != 8) if(event.keyCode != 9)  return false;">
                        </div>
                    </div>
                    <div class="col-12">
                        <label for="probablity_wining" class="form-label"><span class="text-danger">*</span>
                            Probablity Of Wining</label>
                        <div class="input-group">
                            <input type="text" name="amount" class="form-control" id="probablity_wining"
                                [(ngModel)]="finalWining"
                                onkeypress="if(event.which < 48 || event.which > 57 ) if(event.which != 8) if(event.keyCode != 9)  return false;">
                        </div>
                    </div>
                    <div class="col-12">
                        <label for="expected_revenue" class="form-label"><span class="text-danger">*</span> Expected
                            Revenue</label>
                        <div class="input-group">
                            <input type="text" name="revenue" class="form-control" id="expected_revenue"
                                [(ngModel)]="finalRevenue"
                                onkeypress="if(event.which < 48 || event.which > 57 ) if(event.which != 8) if(event.keyCode != 9)  return false;">
                        </div>
                    </div>

                    <div class="col-md-12">
                        <label for="expected_closing" class="form-label"><span class="text-danger">*</span>
                            Expected Closing Date
                        </label>
                        <div class="input-group">
                            <input type="date" class="form-control" id="expected_closing"
                                [(ngModel)]="finalExpectedclosing">
                        </div>
                    </div>
                    <div class="col-md-12">
                        <label for="expected_closing" class="form-label"><span class="text-danger"></span>
                            Follow Up Date
                        </label>
                        <div class="input-group">
                            <input type="date" class="form-control" id="expected_closing"
                                [(ngModel)]="finalFollowUpDate">
                        </div>
                    </div>

                    <!-- <div class="col-md-12">
                        <div *ngFor="let obj of finalDecisionArr; let i = index">
                            <label for="decesionName" class="form-label"><span class="text-danger"></span>Decesion
                                Maker Name
                            </label>
                            <div class="input-group">
                                <input type="text" name="DecesionMaker" class="form-control"
                                    [(ngModel)]="obj.decisionMakerName">
                            </div>
                            <label for="product_name" class="form-label"><span class="text-danger"></span>Designation
                            </label>
                            <div class="input-group">
                                <input type="text" name="Designation" class="form-control" id="expected_revenue"
                                    [(ngModel)]="obj.decisionMakerDesignation">
                            </div>
                            <div class="col-md-12">
                                <label for="platform_type" class="form-label"><span
                                        class="text-danger"></span>Authority Capability</label>
                                <select class="form-select" aria-label="Default select example" id="authority_type"
                                    [(ngModel)]="obj.decisionMakerAuth">
                                    <option value="">Select an option</option>
                                    <option value="1">Top Management</option>
                                    <option value="2">Medium Management</option>
                                    <option value="3">Low Management</option>

                                </select>
                            </div>

                            <div class="col-md-12 mt-5">
                                <a class="btn btn-xs btn-primary mb-3" (click)="finalAddAnalysis()"
                                    *ngIf="finalDecisionArr.length < 3">+ Add
                                    Another</a>
                            </div>
                            <button type="button" *ngIf="finalDecisionArr.length > 1" class="btn btn-danger"
                                (click)="finalRemoveDecision(i)">X</button>
                        </div>
                    </div> -->

                    <div class="col-12">
                        <label for="amount" class="form-label"><span class="text-danger"></span> Proposal
                            value</label>
                        <div class="input-group">
                            <input type="text" name="proposalValue" class="form-control"
                                [(ngModel)]="finalProposalValues"
                                onkeypress="if(event.which < 48 || event.which > 57 ) if(event.which != 8) if(event.keyCode != 9)  return false;">
                        </div>
                    </div>
                    <div class="col-12">
                        <label for="probablity_wining" class="form-label"><span class="text-danger"></span>
                            Proposal Number</label>
                        <div class="input-group">
                            <input type="text" name="pnumber" class="form-control" id="proposal_number"
                                [(ngModel)]="finalProposalnumber">
                        </div>
                    </div>
                    <div class="col-12">
                        <label for="status_type" class="form-label d-block"><span class="text-danger">*</span>Proposal
                            sent</label>
                        <mat-radio-group aria-label="Select an option" (change)="finalProposalSentChk()"
                            [(ngModel)]="finalproposalSent">
                            <mat-radio-button style="padding-left: 8px" [value]="1">Yes
                            </mat-radio-button> &nbsp;
                            <mat-radio-button [value]="0">No</mat-radio-button>
                        </mat-radio-group><br><br>
                    </div>
                    <div class="col-12" *ngIf="finalProposalSentFlag">
                        <div class="col-md-12 mb-4">

                            <!-- <div class="d-block mb-4">Upload Proposal</div> -->
                            <!-- <div class="d-inline-block align-middle me-4">
                                <img src="assets/images/placeholder.png" alt="placeholder" *ngIf="!fileUploadStatus">
                                <img [src]=imageSrc alt="placeholder" height="50" width="50" *ngIf="fileUploadStatus">

                            </div> -->
                            <div class="ml-3">
                                <span>{{uploadedFileName}}</span>
                            </div>
                            <div class="d-inline-block align-middle position-relative upl_opn_dv">

                                <div class="input-button-wrap d-flex w-100 file-div">
                                    <label class="input-button" for="upload" style="width:40%">Upload File</label>
                                    <div class="file-upload-div"><input id="upload" type="file" (change)="uploadFile()"
                                            accept=".png, .jpg, .jpeg, .pdf">
                                    </div>
                                </div>

                            </div>
                            <small class="text-primary d-block mt-3">Upload File Below
                                100mb.<br>
                                Supported Format : Jpeg, jpg, png, pdf</small>
                        </div>
                        <div class="col-md-12">
                            <label for="expected_closing" class="form-label"><span class="text-danger"></span>
                                Proposal
                                Sent Date
                            </label>
                            <div class="input-group">
                                <input type="date" class="form-control" id="expected_closing"
                                    [(ngModel)]="finalProposalSentDate">
                            </div>
                        </div>
                        <div class="col-md-12">
                            <label for="expected_closing" class="form-label"><span class="text-danger"></span>
                                Next
                                Follow Up Date
                            </label>
                            <div class="input-group">
                                <input type="date" class="form-control" id="expected_closing"
                                    [(ngModel)]="finalNextFollowUpDate">
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <label for="amount" class="form-label"><span class="text-danger"></span> Customer
                            Proposed Value
                        </label>
                        <div class="input-group">
                            <input type="text" name="proposedValue" class="form-control"
                                [(ngModel)]="finalCustomerproposedValue"
                                onkeypress="if(event.which < 48 || event.which > 57 ) if(event.which != 8) if(event.keyCode != 9)  return false;">
                        </div>
                    </div>
                    <div class="col-12">
                        <label for="probablity_wining" class="form-label"><span class="text-danger">*</span>
                            Mutually Agreed Contact Value</label>
                        <div class="input-group">
                            <input type="text" name="contactvalue" class="form-control" id="probablity_wining"
                                [(ngModel)]="finalMutuallyAgreedContactValue"
                                onkeypress="if(event.which < 48 || event.which > 57 ) if(event.which != 8) if(event.keyCode != 9)  return false;">
                        </div>
                    </div>
                    <!-- <div class="col-12">
                        <label for="status_type" class="form-label d-block"><span class="text-danger">*</span>
                            Revised Proposal Sent</label>
                        <mat-radio-group aria-label="Select an option" (change)="finalRevisedOption()"
                            [(ngModel)]="finalRevisedProposalSent">
                            <mat-radio-button style="padding-right: 8px" [value]="1">Yes
                            </mat-radio-button>&nbsp;
                            <mat-radio-button [value]="0">No</mat-radio-button>
                        </mat-radio-group><br><br>
                    </div>
                    <div class="col-12" *ngIf="fileUploadFlag">

                        <div class="col-md-12 mb-4">
                            <div class="d-block mb-4">Upload Proposal</div>
                            <div class="d-inline-block align-middle me-4">
                                <img src="assets/images/placeholder.png" alt="placeholder" *ngIf="!fileUploadStatus">
                                <img [src]=imageSrc alt="placeholder" height="50" width="50" *ngIf="fileUploadStatus">

                            </div>
                            <div class="d-inline-block align-middle position-relative upl_opn_dv">

                                <div class="input-button-wrap d-flex w-100 file-div">
                                    <label class="input-button" for="upload">Upload File</label>
                                    <div class="file-upload-div"><input id="upload" type="file" (change)="uploadFile()">
                                    </div>
                                </div>

                            </div>
                            <small class="text-primary d-block mt-3">Upload File Below
                                100mb.<br>
                                Supported Format : Jpeg, jpg, png, pdf</small>
                        </div>

                        <label for="expected_closing" class="form-label"><span class="text-danger">*</span>
                            Proposal Number
                        </label>

                        <div class="input-group">
                            <input type="text" class="form-control" id="expected_closing"
                                [(ngModel)]="finalProposalnumber">
                        </div>
                        <label for="expected_closing" class="form-label"><span class="text-danger">*</span>New
                            Proposal Sent Date

                        </label>
                        <div class="input-group">
                            <input type="date" class="form-control" id="expected_closing"
                                [(ngModel)]="finalNewProposalSentDate">
                        </div>
                        <label for="expected_closing" class="form-label"><span class="text-danger">*</span>Next
                            Follow Up Date

                        </label>
                        <div class="input-group">
                            <input type="date" class="form-control" id="expected_closing"
                                [(ngModel)]="finalNextFollowUp">
                        </div>
                    </div><br><br> -->


                    <div class="col-12">
                        <ul class="poptablist mb-4 mt-2">
                            <li class="d-inline-block align-middle mark-as-complete"
                                [ngClass]="closeOwn == true ? 'active':''">
                                <a id="popchildfirst" class="d-block py-2 px-3 bg-white popchildfirst-custom">
                                    <div class="form-check">
                                        <label class="form-check-label" for="closed_won_list">Closed Won</label>
                                        <input class="form-check-input" type="checkbox" value="" id="closed_won_list"
                                            [checked]="closeOwn" (click)="selectOption(0)">
                                    </div>
                                </a>
                            </li>
                            <li class="d-inline-block align-middle ms-n1 mark-as-complete"
                                [ngClass]="closeLost == true ? 'active':''">
                                <a id="popchildscnd" class="d-block py-2 px-3 bg-white">
                                    <div class="form-check">
                                        <label class="form-check-label" for="closed_lost_list">Closed
                                            Lost</label>
                                        <input class="form-check-input" type="checkbox" value="" id="closed_lost_list"
                                            [checked]="closeLost" (click)="selectOption(1)">
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div id="closed_won" [hidden]="!closeOwn">
                        <div class="row">
                            <div class="col-12">
                                <label for="amount" class="form-label"><span class="text-danger">*</span>
                                    Closing Amount</label>
                                <div class="input-group">
                                    <input type="text" name="amount" class="form-control" id="amount"
                                        [(ngModel)]="finalClosingAmount"
                                        onkeypress="if(event.which < 48 || event.which > 57 ) if(event.which != 8) if(event.keyCode != 9)  return false;">
                                </div>
                            </div>
                            <div class="col-12">
                                <label for="closing_date" class="form-label"><span class="text-danger">*</span>
                                    Closing Date</label>
                                <div class="input-group">
                                    <input type="date" class="form-control" id="expected_closing"
                                        [(ngModel)]="finalClosingDate">
                                </div>
                            </div>
                            <div class="col-12">
                                <label for="description" class="form-label">Description</label>
                                <div class="input-group">
                                    <textarea name="Address" class="form-control" id="description" rows="7"
                                        style="height:150px" [(ngModel)]="finalClosingDescription"
                                        onkeypress="if(this.value.length > 100) return false;"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <div id="closed_won" [hidden]="!closeOwn">
                        <div class="row">
                            <div class="col-12">
                                <label for="amount" class="form-label"><span class="text-danger">*</span>
                                    Amount</label>
                                <div class="input-group">
                                    <input type="text" name="amount" class="form-control" id="amount"
                                        [(ngModel)]="closingAmount">
                                </div>
                            </div>
                            <div class="col-12">
                                <label for="closing_date" class="form-label"><span class="text-danger">*</span>
                                    Closing Date</label>
                                <div class="input-group">
                                    <input type="date" class="form-control" id="expected_closing"
                                        [(ngModel)]="closingDate">
                                </div>
                            </div>
                            <div class="col-12">
                                <label for="description" class="form-label">Description</label>
                                <div class="input-group">
                                    <textarea name="Address" class="form-control" id="description" rows="7"
                                        style="height:150px" [(ngModel)]="closingDescription"
                                        onkeypress="if(this.value.length > 100) return false;"></textarea>
                                </div>
                            </div>
                        </div>
                    </div> -->
                    <div id="closed_lost" [hidden]="!closeLost">
                        <div class="row">
                            <div class="col-12">
                                <label for="reason" class="form-label"><span class="text-danger">*</span>
                                    Reason</label>
                                <div class="input-group">
                                    <select class="form-select" aria-label="Default select example" id="reason_type"
                                        [(ngModel)]="finalClosingReason">
                                        <option value="">Select an options</option>
                                        <option [value]="data.id" *ngFor="let data of reasonList">{{data.name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-12">
                                <label for="description" class="form-label">Description</label>
                                <div class="input-group">
                                    <textarea name="Address" class="form-control" id="description" rows="7"
                                        style="height:150px" [(ngModel)]="finalLostClosingDescription"
                                        onkeypress="if(this.value.length > 100) return false;"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <button class="btn btn-success" type="button" (click)="finalStageSubmit()"
                            *ngIf="!oppStageUpdateFlag">Submit <i class="fas fa-chevron-circle-right"></i></button>
                        <button class="btn btn-success" type="button" (click)="finalUpdateStage()"
                            *ngIf="oppStageUpdateFlag">Update <i class="fas fa-chevron-circle-right"></i></button>
                    </div><br><br>

                </div>
            </div>
        </div>
    </div>
</ng-template>