<main class="content">
    <div class="container-fluid p-0">
        <div class="row mb-2 mb-lg-4">
            <div class="col-md-12 d-lg-flex align-items-center main-hdng">
                <div class="col-md-6">
                    <h3>Lead Details</h3>
                </div>
                <div class="col-md-6">
                    <div class="">
                        <nav style="--bs-breadcrumb-divider: '';" aria-label="breadcrumb">
                            <ol class="breadcrumb justify-content-end">
                                <li class="breadcrumb-item active"><a>Leads</a></li>
                                <li class="breadcrumb-item active" aria-current="page">{{firstName}} {{LastName}}</li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mb-2 mb-lg-4">
            <div class="col-md-12 d-lg-flex align-items-center hdng-btm">
                <div class="col-md-6">
                    <a class="btn btn-primary btn-lg me-3" (click)="backToPreviousPage()">Back To List <i
                            class="fas fa-chevron-left"></i></a>
                </div>
                <div class="col-md-6 text-end mt-n1">
                    <ul class="list-inline ml-auto mt-3 mt-lg-0 mb-0">
                        <li class="list-inline-item">
                            <button class="btn btn-primary btn-lg" (click)="addLead()" *ngIf="permissionData.addPem == 1">Add New <i
                                    class="fas fa-plus"></i></button>
                        </li>

                        <!-- <li class="list-inline-item me-1 icon-border">
                            <button disabled class="btn btn-outline-dark rounded-3 btn-xs" href="javascript:void(0)"
                                data-bs-toggle="tooltip" data-bs-placement="bottom" title="Print">
                                <img src="assets/images/printer.svg" alt="printer"></button>
                        </li> -->

                        <li class="list-inline-item me-1 icon-border">
                            <button class="btn btn-outline-dark rounded-3 btn-xs" (click)="editLead()" *ngIf="permissionData.editPem == 1"
                                data-bs-toggle="tooltip" data-bs-placement="bottom" title="Edit">
                                <img src="assets/images/pen.svg" alt="pen"></button>
                        </li>

                        <!-- <li class="list-inline-item me-1 icon-border">
                            <button disabled class="btn btn-outline-dark rounded-3 btn-xs" href="javascript:void(0)"
                                data-bs-toggle="tooltip" data-bs-placement="bottom" title="Schedule">
                                <img src="assets/images/calendar-days.svg" alt="calendar"></button>
                        </li> -->

                        <!-- <li class="list-inline-item me-1 icon-border">
                            <button disabled class="btn btn-outline-dark rounded-3 btn-xs" href="javascript:void(0)"
                                data-bs-toggle="tooltip" data-bs-placement="bottom" title="portrait">
                                <img src="assets/images/iphone-portrait.svg" alt="iphone"></button>
                        </li> -->

                        <!-- <li class="list-inline-item me-1 icon-border">
                            <button disabled class="btn btn-outline-dark rounded-3 btn-xs" href="javascript:void(0)"
                                data-bs-toggle="tooltip" data-bs-placement="bottom" title="Email">
                                <img src="assets/images/mail.svg" alt="mail"></button>
                        </li> -->

                        <!-- <li class="list-inline-item icon-border me-0">
                            <a class="mat-menu-trigger d-inline-block align-middle"
                                href="javascript:void(0)" data-bs-toggle="dropdown" aria-expanded="false">
                                <img src="assets/images/hdr-menu-vertical.svg" alt="menu-vertical"
                                    data-bs-toggle="tooltip" data-bs-placement="bottom" title="More"></a>
                            <div class="dropdown-menu dropdown-menu-end">
                                <a class="dropdown-item" href="javascript:void(0)">Edit this lead</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0)">Change lead image</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0)">Delete</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0)">Email this lead</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0)">Clone</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0)">Follow this lead</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0)">Convert this lead</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0)">Add activity</a>
                            </div>
                        </li> -->
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="bg-white shadow-lg py-3 px-3 rounded-3 mb-4 profile-details">
                    <div class="row align-items-center">
                        <div class="col-md-4 d-md-flex">
                            <div class="d-inline-block align-middle me-3 details_img" style="width: 78px;">
                                <img src="{{uploadImage}}" alt="profile-img">
                            </div>
                            <div class="d-inline-block align-middle">
                                <h3>{{firstName}} {{LastName}}</h3>
                                <!-- <h5>Lead Source : {{leadSource}}</h5> -->
                                <h5>Lead Source : {{leadSourceTypename}}</h5>
                                <h5>Lead Owner : {{ownerName}}</h5>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="d-inline-block align-middle">
                                <img src="assets/images/profile_iphone-portrait.svg" alt="iphone-portrait">
                            </div>
                            <div class="d-inline-block align-middle">
                                <h6 class="ph_txt">Phone number</h6>
                                <h6 class="ph_no">{{userPhoneNo}}</h6>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="d-inline-block align-middle">
                                <img src="assets/images/profile_mail.svg" alt="profile_mail">
                            </div>
                            <div class="d-inline-block align-middle">
                                <h6 class="ph_txt">Email address</h6>
                                <!-- <h6 class="ph_no">{{userEmail}}</h6> -->
                                <h6 class="ph_no">{{userEmailStr}}</h6>
                            </div>
                        </div>
                        <!-- <div class="col-md-2">
                           <div class="text-end mt-n5">
                              <h5 class="profile-status ">
                                 Status :
                                 <a class="dropdown-toggle" href="javascript:void(0)" data-bs-toggle="dropdown" aria-expanded="false">
                                 <span class="text-success pe-2">OPEN - Contacted</span></a>
                                 <div class="dropdown-menu dropdown-menu-end">
                                    <a class="dropdown-item" href="javascript:void(0)">Not contacted</a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" href="javascript:void(0)">Attempted contact</a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" href="javascript:void(0)">Contacted</a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" href="javascript:void(0)">Converted</a>
                                 </div>
                              </h5>
                           </div>
                        </div> -->
                        <div class="col-auto d-block ms-auto">
                            <div class="text-end mt-n4">
                                <h5 class="profile-status ">Status :

                                    <!-- class="dropdown-toggle"
                                       data-bs-toggle="dropdown" aria-expanded="false" mat-button [matMenuTriggerFor]="activemenu" -->

                                    <!--<mat-menu #activemenu="matMenu">
                                        <button mat-menu-item (click)="stageCompleteModal()">Not Contacted</button>
                                        <button mat-menu-item (click)="stageCompleteModal()">Attempted Contact</button>
                                        <button mat-menu-item (click)="stageCompleteModal()">Contacted</button>
                                        <button mat-menu-item (click)="stageCompleteModal()">Converted</button>
                                    </mat-menu>-->
                                    <ng-container  *ngIf="permissionData.editPem == 0">
                                        <span class="text-success pe-2">{{leadStatusType}}</span>
                                    </ng-container>

                                    
                                    <ng-container  *ngIf="permissionData.editPem == 1">
                                    <a class="dropdown-toggle" mat-button [matMenuTriggerFor]="activemenu"
                                        data-bs-toggle="dropdown" aria-expanded="false">
                                        <span class="text-success pe-2">{{leadStatusType}}</span>
                                        
                                        <!-- <span class="text-success pe-2" *ngIf="leadStatusType == '1'">Warm</span>
                                        <span class="text-success pe-2" *ngIf="leadStatusType == '2'">Cold</span>
                                        <span class="text-success pe-2" *ngIf="leadStatusType == '3'">Hot</span> -->
                                    </a>
                                    <mat-menu #activemenu="matMenu">
                                        <button mat-menu-item  *ngFor = "let obj of natureList" (click)="statusChange(obj.id)">{{obj.name}}</button>

                                        <!-- <button mat-menu-item (click)="statusChange(2)">Cold</button>
                                        <button mat-menu-item (click)="statusChange(3)">Hot</button> -->

                                    </mat-menu>
                                </ng-container>
                                </h5>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mb-3 profile-navigation">
                    <div class="d-sm-flex align-items-center mb-3">
                        <div class="col-auto me-4">
                            <!-- <h4>Lead Status: <span class="text-success">{{leadStatusName}}</span></h4> -->
                            <h4>Current Stage: <span class="text-success">{{nextLeadStatusName}}</span></h4>

                        </div>
                        <!-- --------For individual Pop up------------ -->


                        <!-- <div class="col-auto">
                            <a class="btn btn-secondary btn-xs me-1" (click)="stageCompleteModal()"
                                *ngIf="!popUpUpdateFlag && leadStatusInt != 3">Mark As
                                Completed</a>
                            <a class="btn btn-secondary btn-xs me-1" (click)="stageUpdateModal()"
                                *ngIf="popUpUpdateFlag">Change </a>
                        </div> -->

                        <!-- ------------------ For Only one pop up------------ -->

                        <div class="col-auto">
                            <a class="btn btn-secondary btn-xs me-1" (click)="finalLeadStageMarkAsComplete()"
                                *ngIf="!finalLeadStagePopFlag && leadStatusInt != popUpShow">Mark As
                                Completed</a>
                            <a class="btn btn-secondary btn-xs me-1" (click)="finalLeadStageChange()"
                                *ngIf="finalLeadStagePopFlag">Change </a>
                        </div>
                    </div>
                    <div class="details-navigation customSetails-navigation">
                        <ul>
                            <!-- <li class="stage_0" id="stage_" [ngClass]="leadStatusInt >= data.sequence ? '' : 'active'"
                                *ngFor="let data of leadStatuslist">
                                <a href="javascript:void(0)"
                                    (click)="finalStageName(data.sequence)">{{data.salesStageName}}</a>
                            </li> -->

                            <!-- <li class="stage_0" id="stage_" [ngClass]="leadStatusInt >= data.salesStageId ? '' : 'active'"
                                *ngFor="let data of leadStatuslist">
                                <a href="javascript:void(0)"
                                    (click)="finalStageName(data.salesStageId)">{{data.salesStageName}}</a>
                            </li> -->

                            <li class="stage_0" id="stage_"
                                [ngClass]="leadStatusInt >= data.salesStageId ? '' : 'active'"
                                *ngFor="let data of leadStatuslist">
                                <a href="javascript:void(0)"
                                    (click)="finalStageName(data.salesStageId)">{{data.salesStageName}}</a>
                            </li>



                            <!-- <li class="stage_1" id="stage_1"><a href="javascript:void(0)">Attempted Contact</a></li>
                            <li class="stage_2" id="stage_2"><a href="javascript:void(0)">Contacted</a></li>
                            <li class="stage_3" id="stage_3"><a href="javascript:void(0)">Converted</a></li> -->
                        </ul>
                    </div>
                </div>
                <div class="bg-white shadow-lg py-4 px-4 rounded-3 mb-3" *ngIf="!tableHide && stageTable">
                    <div id="datatables-reponsive_wrapper" class="dataTables_wrapper dt-bootstrap5 no-footer">
                        <div class="d-md-flex align-items-center mb-3">
                            <div class="col-auto d-block">
                                <h4>Stage Details</h4>
                            </div>
                            <div class="col-auto d-block ms-auto">
                                <div class="text-center">
                                    <!-- <div class="dataTables_length" id="datatables-reponsive_length">
                                        <label>
                                            Records per page
                                            <select name="datatables-reponsive_length"
                                                aria-controls="datatables-reponsive" class="form-select form-select-sm">
                                                <option value="10">10</option>
                                                <option value="15">15</option>
                                                <option value="30">20</option>
                                                <option value="30">30</option>
                                                <option value="50">50</option>
                                            </select>
                                            1 - 10
                                        </label>
                                        <label>
                                            <a class="px-1 d-inline-block align-middle" href="javascript:void(0)">
                                                <img src="assets/images/chevron-left.svg" alt="chevron-left"></a>
                                            <a class="px-1 d-inline-block align-middle" href="javascript:void(0)">
                                                <img src="assets/images/chevron-right.svg" alt="chevron-right"></a>
                                        </label>
                                    </div> -->
                                </div>
                            </div>
                            <div class="btn-group btn-group-sm ms-auto  btn-download-group">
                                <button disabled type="button" class="btn btn-md bg-white px-4">CSV</button>
                                <button disabled type="button" class="btn bg-white px-4">PDF</button>
                                <button disabled type="button" class="btn bg-white px-4">Excel</button>
                                <button disabled type="button" class="btn bg-white px-4">Upload</button>
                                <button disabled type="button" class="ps-2 dropdown-toggle no-dropdown-arrow"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    <img src="assets/images/filtering.svg" alt="filtering"></button>
                                <div class="dropdown-menu dropdown-menu-end addDropdownhead">
                                    <a class="dropdown-item d-md-flex align-items-center" href="javascript:void(0)">
                                        <span class="col-auto d-block me-2">Stage</span>
                                        <div class="form-check form-switch col-auto d-block ms-auto">
                                            <input class="form-check-input" type="checkbox" id="switch1">
                                        </div>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item d-md-flex align-items-center" href="javascript:void(0)">
                                        <span class="col-auto d-block me-2">Amount</span>
                                        <div class="form-check form-switch col-auto d-block ms-auto">
                                            <input class="form-check-input" type="checkbox" id="switch2">
                                        </div>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item d-md-flex align-items-center" href="javascript:void(0)">
                                        <span class="col-auto d-block me-2">Probability</span>
                                        <div class="form-check form-switch col-auto d-block ms-auto">
                                            <input class="form-check-input" type="checkbox" id="switch3">
                                        </div>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item d-md-flex align-items-center" href="javascript:void(0)">
                                        <span class="col-auto d-block me-2">Expected Revenue</span>
                                        <div class="form-check form-switch col-auto d-block ms-auto">
                                            <input class="form-check-input" type="checkbox" id="switch4">
                                        </div>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item d-md-flex align-items-center" href="javascript:void(0)">
                                        <span class="col-auto d-block me-2">Expected Closing Date</span>
                                        <div class="form-check form-switch col-auto d-block ms-auto">
                                            <input class="form-check-input" type="checkbox" id="switch5">
                                        </div>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item d-md-flex align-items-center" href="javascript:void(0)">
                                        <span class="col-auto d-block me-2">Stage Duration</span>
                                        <div class="form-check form-switch col-auto d-block ms-auto">
                                            <input class="form-check-input" type="checkbox" id="switch6">
                                        </div>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item d-md-flex align-items-center" href="javascript:void(0)">
                                        <span class="col-auto d-block me-2">Modified Time</span>
                                        <div class="form-check form-switch col-auto d-block ms-auto">
                                            <input class="form-check-input" type="checkbox" id="switch7">
                                        </div>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item d-md-flex align-items-center" href="javascript:void(0)">
                                        <span class="col-auto d-block me-2">Modified By</span>
                                        <div class="form-check form-switch col-auto d-block ms-auto">
                                            <input class="form-check-input" type="checkbox" id="switch8">
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table id="datatables-column-search-select-inputs" class="table table-striped dataTable"
                                style="width: 100%;" aria-describedby="datatables-column-search-select-inputs_info">

                                <thead class="thead-dark" *ngIf="stageTable">
                                    <tr role="row">
                                        <th class="sorting align-middle">Description</th>
                                        <th class="sorting align-middle">Follow Up Date</th>
                                        <th class="sorting align-middle">Amount</th>
                                        <th class="sorting align-middle">Probablity Of Wining(%)</th>
                                        <th class="sorting align-middle">Expected revenue</th>
                                        <th class="sorting align-middle">Expected Closing Date</th>
                                        <th class="sorting align-middle">Stage Duration(Days)</th>
                                        <th class="sorting align-middle">Lost Status</th>
                                        <th class="sorting align-middle">Lost Description</th>
                                        <th class="sorting align-middle">Modified Time</th>
                                        <th class="sorting align-middle">Modified By</th>
                                    </tr>
                                </thead>

                                <tbody *ngIf="stageTable">
                                    <tr *ngIf="stageData.length == 0">
                                        <td colspan="12" style="text-align: center;">Non of stage complete till now</td>
                                    </tr>
                                    <tr role="row" *ngFor="let data of stageData; let i = index"
                                        [ngClass]="(i+1) % 2 != 0 ? 'odd' : 'even'">
                                        <td class="align-middle" *ngIf = "data.description != null">{{data.description}}</td>
                                        <td class="align-middle" *ngIf = "data.description == null">--</td>
                                        <td class="align-middle">{{data.followUpDate | date :"dd-MM-yyyy"}}</td>
                                        <td class="align-middle">{{data.amount}}</td>
                                        <td class="align-middle">{{data.probOfWin}}</td>
                                        <td class="align-middle">{{data.expectedRevenue}}</td>
                                        <td class="align-middle">{{data.expectedClosingDate | date:"dd-MM-yyyy"}}</td>
                                        <td class="align-middle">{{data.stageDuration}}</td>
                                        <td class="align-middle" *ngIf="data.lostReason == '1'">Not Possible To Connect
                                        </td>
                                        <td class="align-middle" *ngIf = "data.lostReason == null">--</td>
                                        <td class="align-middle" *ngIf="data.lostReason == '2'">Not Interested</td>
                                        <td class="align-middle" *ngIf="data.lostReason == '3'">Contact in Future</td>
                                        <td class="align-middle" *ngIf = "data.lostDescription != null">{{data.lostDescription}}</td>
                                        <td class="align-middle" *ngIf = "data.lostDescription == null">--</td>
                                        <td class="align-middle">{{data.createdAt | date: "dd-MM-yyyy"}}</td>
                                        <td class="align-middle">{{data.createdByUserName}}</td>
                                    </tr>
                                </tbody>

                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="bg-white shadow-lg py-3 px-3 rounded-3 profile-details-info">
                    <div class="hdr d-md-flex align-items-center mb-3">
                        <div class="col-auto d-block">
                            <h3>Detail informations</h3>
                        </div>
                        <div class="col-auto d-block ms-auto">
                            <ul class="nav nav-pills " id="pills-tab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill"
                                        data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home"
                                        aria-selected="true" (click)="toggleDetails(1)">
                                        Business
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill"
                                        data-bs-target="#pills-profile" type="button" role="tab"
                                        aria-controls="pills-profile" aria-selected="false"
                                        (click)="toggleDetails(2)">Personal
                                    </button>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="tab-content" id="pills-tabContent">
                        <div class="tab-pane fade show active" id="pills-home" role="tabpanel"
                            aria-labelledby="pills-home-tab" [hidden]="isBusinessDetails">
                            <div class="accordion" id="accordionExamplebuisness">
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingbuisnessOne">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                            data-bs-target="#collapsebuisnessOne" aria-expanded="true"
                                            aria-controls="collapsebuisnessOne">Organization
                                        </button>
                                    </h2>
                                    <div id="collapsebuisnessOne" class="accordion-collapse collapse show"
                                        aria-labelledby="headingbuisnessOne" data-bs-parent="#accordionExamplebuisness">
                                        <div class="accordion-body">
                                            <div class="details-info-inner">
                                                <table class="table table-sm table-borderless my-2">
                                                    <tbody>
                                                        <tr>
                                                            <th>Record ID :</th>
                                                            <td>63969078</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Organization name :</th>
                                                            <td>{{organizationName}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Owner name :</th>
                                                            <td>{{ownerName}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Lead name :</th>
                                                            <td>{{firstName}} {{LastName}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Title :</th>
                                                            <td>{{title}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Phone number :</th>
                                                            <td>{{OrgPhone}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Email address :</th>
                                                            <td>{{OrgEmail}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--<mat-accordion>
                                    <mat-expansion-panel class="custonm-mat-expansion-panel"
                                                         style="margin-bottom: 15px;" [expanded]="isOpen">
                                        <mat-expansion-panel-header>
                                            <mat-panel-title>
                                                Organization
                                            </mat-panel-title>
                                            <mat-panel-description>
                                            </mat-panel-description>
                                        </mat-expansion-panel-header>
                                        <div class="details-info-inner">
                                            <table class="table table-sm table-borderless my-2">
                                                <tbody>
                                                <tr>
                                                    <th>Record ID :</th>
                                                    <td>63969078</td>
                                                </tr>
                                                <tr>
                                                    <th>Organization name :</th>
                                                    <td>{{organizationName}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Owner name :</th>
                                                    <td>{{ownerName}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Lead name :</th>
                                                    <td>{{firstName}} {{LastName}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Title :</th>
                                                    <td>{{title}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Phone number :</th>
                                                    <td>{{OrgPhone}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Email address :</th>
                                                    <td>{{OrgEmail}}</td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </mat-expansion-panel>
                                </mat-accordion>-->
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingbuisnessTwo">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapsebuisnessTwo"
                                            aria-expanded="false" aria-controls="collapsebuisnessTwo">Organization
                                            address
                                        </button>
                                    </h2>
                                    <div id="collapsebuisnessTwo" class="accordion-collapse collapse"
                                        aria-labelledby="headingbuisnessTwo" data-bs-parent="#accordionExamplebuisness">
                                        <div class="accordion-body">
                                            <div class="details-info-inner">
                                                <table class="table table-sm table-borderless my-2">
                                                    <tbody>
                                                        <tr>
                                                            <th>Full Address :</th>
                                                            <td>{{ORGaddress}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Country :</th>
                                                            <td>{{ORGcountryName}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>State name :</th>
                                                            <td>{{ORGStageName}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>District name :</th>
                                                            <td>{{ORGCityName}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Zone :</th>
                                                            <td>{{ORGZoneName}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Geo location :</th>
                                                            <td>{{ORG_GEO}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Lat. Long. :</th>
                                                            <td>{{ORG_LAT}}, {{ORG_Long}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--<mat-accordion>
                                    <mat-expansion-panel class="custonm-mat-expansion-panel"
                                                         style="margin-bottom: 15px;">
                                        <mat-expansion-panel-header>
                                            <mat-panel-title>
                                                Organization address
                                            </mat-panel-title>
                                            <mat-panel-description>
                                            </mat-panel-description>
                                        </mat-expansion-panel-header>
                                        <div class="details-info-inner">
                                            <table class="table table-sm table-borderless my-2">
                                                <tbody>
                                                <tr>
                                                    <th>Full Address :</th>
                                                    <td>{{ORGaddress}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Country :</th>
                                                    <td>{{ORGcountryName}}</td>
                                                </tr>
                                                <tr>
                                                    <th>State name :</th>
                                                    <td>{{ORGStageName}}</td>
                                                </tr>
                                                <tr>
                                                    <th>District name :</th>
                                                    <td>{{ORGCityName}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Zone :</th>
                                                    <td>{{ORGZoneName}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Geo location :</th>
                                                    <td>{{ORG_GEO}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Lat. Long. :</th>
                                                    <td>{{ORG_LAT}}, {{ORG_Long}}</td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </mat-expansion-panel>
                                </mat-accordion>-->
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingbuisnessThree">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapsebuisnessThree"
                                            aria-expanded="false" aria-controls="collapsebuisnessThree">Other
                                        </button>
                                    </h2>
                                    <div id="collapsebuisnessThree" class="accordion-collapse collapse"
                                        aria-labelledby="headingbuisnessThree"
                                        data-bs-parent="#accordionExamplebuisness">
                                        <div class="accordion-body">
                                            <div class="details-info-inner">
                                                <table class="table table-sm table-borderless my-2">
                                                    <tbody>
                                                        <tr>
                                                            <th>Annual revenue :</th>
                                                            <td>{{orgAnualRevenue}} INR</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Number of employee :</th>
                                                            <td>{{numberOfEmp}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--<mat-accordion>
                                    <mat-expansion-panel class="custonm-mat-expansion-panel"
                                                         style="margin-bottom: 15px;">
                                        <mat-expansion-panel-header>
                                            <mat-panel-title>
                                                Other
                                            </mat-panel-title>
                                            <mat-panel-description>
                                            </mat-panel-description>
                                        </mat-expansion-panel-header>
                                        <div class="details-info-inner">
                                            <table class="table table-sm table-borderless my-2">
                                                <tbody>
                                                <tr>
                                                    <th>Annual revenue :</th>
                                                    <td>{{orgAnualRevenue}} INR</td>
                                                </tr>
                                                <tr>
                                                    <th>Number of employee :</th>
                                                    <td>{{numberOfEmp}}</td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </mat-expansion-panel>
                                </mat-accordion>-->
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingbuisnessFour">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapsebuisnessFour"
                                            aria-expanded="false" aria-controls="collapsebuisnessFour">Interested in
                                        </button>
                                    </h2>
                                    <div id="collapsebuisnessFour" class="accordion-collapse collapse"
                                        aria-labelledby="headingbuisnessFour"
                                        data-bs-parent="#accordionExamplebuisness">
                                        <div class="accordion-body">
                                            <div class="details-info-inner">
                                                <table class="table table-sm table-borderless my-2">
                                                    <tbody *ngFor="let data of currentCompetitor">
                                                        <tr>
                                                            <th>Product name :</th>
                                                            <td>{{data.productName}}</td>
                                                        </tr>
                                                        <!-- <tr>
                                                            <th>Quantity :</th>
                                                            <td>20 Ton</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Expected lead amount :</th>
                                                            <td>1000000INR</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Expected close date :</th>
                                                            <td>25th April 2022</td>
                                                        </tr> -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--<mat-accordion>
                                    <mat-expansion-panel class="custonm-mat-expansion-panel"
                                                         style="margin-bottom: 15px;">
                                        <mat-expansion-panel-header>
                                            <mat-panel-title>
                                                Interested in
                                            </mat-panel-title>
                                            <mat-panel-description>
                                            </mat-panel-description>
                                        </mat-expansion-panel-header>
                                        <div class="details-info-inner">
                                            <table class="table table-sm table-borderless my-2">
                                                <tbody>
                                                <tr>
                                                    <th>Product name :</th>
                                                    <td>Bar product</td>
                                                </tr>
                                                <tr>
                                                    <th>Quantity :</th>
                                                    <td>20 Ton</td>
                                                </tr>
                                                <tr>
                                                    <th>Expected lead amount :</th>
                                                    <td>1000000INR</td>
                                                </tr>
                                                <tr>
                                                    <th>Expected close date :</th>
                                                    <td>25th April 2022</td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </mat-expansion-panel>
                                </mat-accordion>-->
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingbuisnessFive">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapsebuisnessFive"
                                            aria-expanded="false" aria-controls="collapsebuisnessFive">Currently
                                            using
                                        </button>
                                    </h2>
                                    <div id="collapsebuisnessFive" class="accordion-collapse collapse"
                                        aria-labelledby="headingbuisnessFive"
                                        data-bs-parent="#accordionExamplebuisness">
                                        <div class="accordion-body">
                                            <div class="details-info-inner">
                                                <table class="table table-sm table-borderless my-2">
                                                    <tbody>
                                                        <tr *ngFor="let data of currentCompetitor">
                                                            <th width="140px">Product name :</th>
                                                            <td>{{data.productName}}</td>
                                                        </tr>
                                                        <tr *ngFor="let data of currentCompetitor">
                                                            <th width="140px">Description :</th>
                                                            <td>{{data.desc}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--<mat-accordion>
                                    <mat-expansion-panel class="custonm-mat-expansion-panel"
                                                         style="margin-bottom: 15px;">
                                        <mat-expansion-panel-header>
                                            <mat-panel-title>
                                                Currently using
                                            </mat-panel-title>
                                            <mat-panel-description>
                                            </mat-panel-description>
                                        </mat-expansion-panel-header>
                                        <div class="details-info-inner">
                                            <table class="table table-sm table-borderless my-2">
                                                <tbody *ngFor="let data of currentCompetitor">
                                                <tr>
                                                    <th width="140px">Product name :</th>
                                                    <td>{{data.productName}}</td>
                                                </tr>
                                                <tr>
                                                    <th width="140px">Description :</th>
                                                    <td>{{data.desc}}</td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </mat-expansion-panel>
                                </mat-accordion>-->
                            </div>
                        </div>
                        <div class="tab-pane fade" id="pills-profile" role="tabpanel"
                            aria-labelledby="pills-profile-tab">
                            <div class="accordion" id="accordionExample">
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingOne">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                            data-bs-target="#collapseOne" aria-expanded="true"
                                            aria-controls="collapseOne">Lead Information
                                        </button>
                                    </h2>
                                    <div id="collapseOne" class="accordion-collapse collapse show"
                                        aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                                        <div class="accordion-body">
                                            <div class="details-info-inner">
                                                <table class="table table-sm table-borderless my-2">
                                                    <tbody>
                                                        <tr>
                                                            <th>Record ID :</th>
                                                            <td>{{recordId}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Name :</th>
                                                            <td>{{firstName}} {{LastName}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Title :</th>
                                                            <td>{{title}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Phone number :</th>
                                                            <td>{{userPhoneNo}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Email address :</th>
                                                            <td>{{userEmailStr}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingTwo">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseTwo"
                                            aria-expanded="false" aria-controls="collapseTwo">Address
                                        </button>
                                    </h2>
                                    <div id="collapseTwo" class="accordion-collapse collapse"
                                        aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                                        <div class="accordion-body">
                                            <div class="details-info-inner">
                                                <table class="table table-sm table-borderless my-2">
                                                    <tbody>
                                                        <tr>
                                                            <th>Full Address :</th>
                                                            <td>{{address}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>State name :</th>
                                                            <td>{{userState}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>District name :</th>
                                                            <td>{{userCity}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Zone :</th>
                                                            <td>{{userZone}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Geo location :</th>
                                                            <td>{{geo}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Lat. Long. :</th>
                                                            <td>{{lat}}, {{long}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingThree">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseThree"
                                            aria-expanded="false" aria-controls="collapseThree">Description
                                        </button>
                                    </h2>
                                    <div id="collapseThree" class="accordion-collapse collapse"
                                        aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                                        <div class="accordion-body">
                                            <div class="details-info-inner">
                                                <table class="table table-sm table-borderless my-2">
                                                    <tbody>
                                                        <tr>
                                                            <!-- <td>Interested for products view</td> -->
                                                            <td>{{orgDescription}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingFour">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseFour"
                                            aria-expanded="false" aria-controls="collapseFour">Lead Conversion
                                            Details
                                        </button>
                                    </h2>
                                    <div id="collapseFour" class="accordion-collapse collapse"
                                        aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                                        <div class="accordion-body">
                                            <div class="details-info-inner">
                                                <table class="table table-sm table-borderless my-2">
                                                    <tbody>
                                                        <tr>
                                                            <th>Converted Contact</th>
                                                            <td>Yes</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Converted Organization</th>
                                                            <td>&nbsp;</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Converted Opportunity</th>
                                                            <td>&nbsp;</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingFive">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseFive"
                                            aria-expanded="false" aria-controls="collapseFour">Online Existance
                                        </button>
                                    </h2>
                                    <div id="collapseFive" class="accordion-collapse collapse"
                                        aria-labelledby="headingFive" data-bs-parent="#accordionExample">
                                        <div class="accordion-body">
                                            <div class="details-info-inner">
                                                <table class="table table-sm table-borderless my-2">
                                                    <tbody>
                                                        <tr *ngFor="let item of socialMediaLink" class="">
                                                            <th>Facebook :</th>
                                                            <!-- <td><a class="btn btn-info btn-xs mb-1" href="item.link"
                                                                    target="_blank">Click
                                                                    here</a></td>
                                                        </tr> -->
                                                            <td>{{item.link}}</td>
                                                        </tr>

                                                        <!-- <tr> -->
                                                        <!-- <tr>
                                                            <th>Instagram :</th>
                                                            <td><a class="btn btn-info btn-xs"
                                                                    href="https://www.instagram.com/"
                                                                    target="_blank">Click
                                                                    here</a></td>
                                                        </tr> -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-2 text-start">
                        <!--                        <button class="btn btn-warning btn-sm">Schedule Meeting <i class="fas fa-clock"></i></button>-->
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="bg-white shadow-lg py-3 px-3 rounded-3 mb-3 profile-details-info">
                    <div class="hdr d-md-flex align-items-center mb-3 lead-hdr">
                        <div class="col-auto d-block">
                            <h3>Activities</h3>
                        </div>
                        <div class="col-auto d-block ms-auto">
                            <ul class="nav nav-pills " id="pills-tab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" [ngClass]="activityType=='past'? 'active' : ''"
                                        id="pills-activitypast-tab" data-bs-toggle="pill"
                                        data-bs-target="#pills-activity-past" type="button" role="tab"
                                        aria-controls="pills-activity-past" aria-selected="false"
                                        (click)="pastActivity()">Past</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" [ngClass]="activityType=='up'? 'active' : ''"
                                        id="pills-activityupcoming-tab" data-bs-toggle="pill"
                                        data-bs-target="#pills-activity-upcoming" type="button" role="tab"
                                        aria-controls="pills-activity-upcoming" aria-selected="true"
                                        (click)="upcomingActivity()">Upcoming</button>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="lead-details-info-inner">
                        <div class="tab-content" id="pills-activity-tabContent">
                            <div class="tab-pane fade show active" id="pills-activity-past" role="tabpanel"
                                aria-labelledby="pills-activitypast-tab">
                                <div class="table-responsive">
                                    <table id="datatables-column-search-select-inputs"
                                        class="table table-striped dataTable" style="width: 100%;"
                                        aria-describedby="datatables-column-search-select-inputs_info">
                                        <thead class="thead-dark">
                                            <tr role="row">
                                                <th class=" align-middle">Type</th>
                                                <th class=" align-middle">Date Due</th>
                                                <th class=" align-middle">Assigned to</th>
                                                <!-- <th class="sorting align-middle">Details</th> -->
                                                <th width="40px">&nbsp;</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngIf="activityList.length == 0">
                                                <td colspan="5" style="text-align: center;">No Activity Found</td>
                                            </tr>
                                            <tr role="row" class="" *ngFor="let data of activityList;let i = index;"
                                                [ngClass]="(i+1)%2 != 0 ? 'odd':'even'">
                                                <td class="align-middle">{{data.activityTypeName}}</td>
                                                <td class="align-middle">{{data.dueDate | date:'dd-MM-yyyy'}}</td>
                                                <td class="align-middle">{{data.firstName}} {{data.lastName}}</td>
                                                <!-- <td class="align-middle"> {{data.remarks}} </td> -->
                                                <td width="40px" class="align-middle">
                                                    <!-- <a class="d-inline-block align-middle" href="javascript:void(0)"><img src="assets/images/paper-plane-alt.svg" alt="chat"></a> -->
                                                    <a class="d-inline-block align-middle dropdown-toggle no-dropdown-arrow"
                                                        href="javascript:void(0)" data-bs-toggle="dropdown"
                                                        aria-expanded="false">
                                                        <!-- <img src="assets/images/menu-vertical.svg" alt="menu"> -->
                                                    </a>
                                                    <!-- <div class="dropdown-menu dropdown-menu-end">
                                               <a class="dropdown-item" href="javascript:void(0)">View details</a>
                                               <div class="dropdown-divider"></div>
                                               <a class="dropdown-item" href="javascript:void(0)">Cancel this task</a>
                                               <div class="dropdown-divider"></div>
                                               <a class="dropdown-item" href="javascript:void(0)">Add new task</a>
                                            </div> -->
                                                    <div class="col-auto d-block ms-auto">
                                                        <div class="text-end mt-n4">
                                                            <h5 class="profile-status ">
                                                                <!-- <a class="dropdown-toggle" mat-button
                                                                [matMenuTriggerFor]="activemenu"
                                                                data-bs-toggle="dropdown" aria-expanded="false">
                                                            </a> -->
                                                                <a class="d-inline-block align-middle" mat-button
                                                                    [matMenuTriggerFor]="menu">
                                                                    <img src="assets/images/menu-vertical.svg"
                                                                        alt="trash"></a>

                                                                <mat-menu #menu="matMenu">
                                                                    <!-- <button mat-menu-item>View details</button> -->
                                                                    <button mat-menu-item
                                                                        (click)="cancelTask(data.id)">Cancel
                                                                        this task
                                                                    </button>
                                                                    <button mat-menu-item
                                                                        (click)="completeActivity(data.id)">
                                                                        Mark as completed
                                                                    </button>
                                                                </mat-menu>



                                                            </h5>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="text-center">

                                    <button type="button" class="px-1 d-inline-block align-middle no-bg"
                                        [disabled]="isPrevious" (click)="previous()">
                                        <img src="assets/images/chevron-left.svg" alt="chevron-left"></button>
                                    <button type="button" class="px-1 d-inline-block align-middle no-bg"
                                        [disabled]="isdisable" (click)="next()">
                                        <img src="assets/images/chevron-right.svg" alt="chevron-right"></button>
                                </div>
                            </div>

                            <!-- <div class="tab-pane fade" id="pills-activity-upcoming" role="tabpanel"
                                aria-labelledby="pills-activityupcoming-tab">
                                <table id="datatables-column-search-select-inputs" class="table table-striped dataTable"
                                    style="width: 100%;" aria-describedby="datatables-column-search-select-inputs_info">
                                    <thead class="thead-dark">
                                        <tr role="row">
                                            <th class="sorting align-middle">Type</th>
                                            <th class="sorting align-middle">Date Due</th>
                                            <th class="sorting align-middle">Assigned to</th>
                                            <th width="40px">&nbsp;</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr role="row" class="odd">
                                            <td class="align-middle">Email</td>
                                            <td class="align-middle">25.05.2022</td>
                                            <td class="align-middle">Bikram Lohar</td>
                                            <td width="40px" class="align-middle"><a class="d-inline-block align-middle"
                                                    href="javascript:void(0)">
                                                    <img src="assets/images/paper-plane-alt.svg" alt="chat"></a>
                                                <a class="d-inline-block align-middle dropdown-toggle no-dropdown-arrow"
                                                    href="javascript:void(0)" data-bs-toggle="dropdown"
                                                    aria-expanded="false">
                                                    <img src="assets/images/menu-vertical.svg" alt="menu"></a>
                                                <div class="dropdown-menu dropdown-menu-end">
                                                    <a class="dropdown-item" href="javascript:void(0)">View details</a>
                                                    <div class="dropdown-divider"></div>
                                                    <a class="dropdown-item" href="javascript:void(0)">Cancel this
                                                        task</a>
                                                    <div class="dropdown-divider"></div>
                                                    <a class="dropdown-item" href="javascript:void(0)">Add new task</a>
                                                </div>
                                            </td>
                                        </tr> -->
                            <!-- <tr role="row" class="even">
                                        <td class="align-middle">Phone</td>
                                        <td class="align-middle">25.05.2022</td>
                                        <td class="align-middle">Bikram Lohar</td>
                                        <td width="40px" class="align-middle"><a class="d-inline-block align-middle"
                                                                                 href="javascript:void(0)">
                                            <img src="assets/images/paper-plane-alt.svg" alt="chat"></a>
                                            <a class="d-inline-block align-middle" href="javascript:void(0)">
                                                <img src="assets/images/menu-vertical.svg" alt="menu"></a></td>
                                    </tr> -->
                            <!-- <tr role="row" class="even">
                                        <td class="align-middle">Phone</td>
                                        <td class="align-middle">25.05.2022</td>
                                        <td class="align-middle">Bikram Lohar</td>
                                        <td width="40px" class="align-middle"><a class="d-inline-block align-middle"
                                                                                 href="javascript:void(0)">
                                            <img src="assets/images/paper-plane-alt.svg" alt="chat"></a>
                                            <a class="d-inline-block align-middle" href="javascript:void(0)">
                                                <img src="assets/images/menu-vertical.svg" alt="menu"></a></td>
                                    </tr> -->
                            <!-- </tbody>
                                </table>
                            </div> -->
                        </div>
                        <div class="mt-4 text-start">
                            <button class="btn btn-warning btn-sm" (click)="addActivityFunc()" *ngIf="permissionData.addPem == 1">Add Activity <i
                                    class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
                <!--<div class="bg-white shadow-lg py-3 px-3 rounded-3 profile-details-info mb-3">
                    <div class="hdr d-md-flex align-items-center">
                        <div class="col-auto d-block">
                            <h3>Invoice :</h3>
                        </div>
                        <div class="col-auto d-block ms-3">
                            <strong class="profile_invoice_price text-danger">0</strong>
                        </div>
                    </div>
                </div>-->
                <div class="bg-white shadow-lg py-3 px-3 rounded-3 profile-details-info mb-3">
                    <div class="hdr d-md-flex align-items-center mb-3">
                        <div class="col-auto d-block">
                            <h3>Lead by</h3>
                        </div>
                    </div>
                    <div class="lead-details-info-inner pad-sm-table">
                        <table class="table table-sm table-borderless my-2">
                            <tbody>
                                <tr>
                                    <th>Lead owner:</th>
                                    <td>{{ownerName}}</td>
                                </tr>
                                <tr>
                                    <th>Lead created :</th>
                                    <td>{{leadCreateAt}}</td>
                                </tr>
                                <tr>
                                    <th>Lead Source :</th>
                                    <td>{{leadSourceTypename}}</td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- <div class="mt-2 text-start">
                            <button class="btn btn-secondary btn-xs">Update <i class="fas fa-pen"></i></button>
                        </div> -->
                    </div>
                </div>
                <div class="bg-white shadow-lg py-3 px-3 rounded-3 profile-details-info mb-3">
                    <div class="hdr d-xl-flex align-items-center mb-3">
                        <div class="col-auto d-block">
                            <h3>Competitor</h3>
                        </div>
                    </div>
                    <div class="lead-details-info-inner pad-sm-table">
                        <table class="table table-sm table-borderless my-2">
                            <!-- <tbody *ngFor="let data1 of compititor">
                                <tr>
                                    <th width="140px">Name :</th>
                                    <td>{{data1.productName}}</td>
                                </tr>
                                <tr>
                                    <th width="140px">Description :</th>
                                    <td>{{data1.desc}} </td>
                                </tr>
                            </tbody> -->
                            <tbody>
                                <tr *ngFor="let data of currentCompetitor">
                                    <th width="140px">Name :</th>
                                    <td>{{data.productName}}</td>
                                    <th width="140px">Description :</th>
                                    <td>{{data.desc}}</td>
                                </tr>   

                                <!-- <tr *ngFor="let data of currentCompetitor">
                                    <th width="140px">Description :</th>
                                    <td>{{data.desc}}</td>
                                </tr> -->

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<!-------------------------------------- Add Activity Modal------------------------------>

<ng-template #addActivity>
    <!-- Modal content-->
    <div class="modal-content">
        <div class="modal-header">
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col-sm-10">
                        <h3 class="modal-title d-inline-block align-middle me-2">Create New Activity</h3>
                        <div class="d-inline-block align-middle">
                            <!-- <a class="btn btn-link" href="javascript:void(0)">Edit page layout</a> -->
                        </div>
                    </div>
                    <div class="col-sm-2 d-flex justify-content-end">
                        <button type="button" data-bs-dismiss="modal" aria-label="Close" class="btn-close"
                            (click)="closeModal()"></button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-body">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12" style="margin-top: 18px;">
                        <label for="status_type" class="form-label"><span class="text-danger">*</span>Activity
                            type</label>
                        <div class="input-group">
                            <select class="form-select" aria-label="Default select example" id="status_type"
                                [(ngModel)]="leadType">
                                <option value="">Select an option</option>
                                <option *ngFor="let data of activityMasterArray" value="{{data.activityId}}">
                                    {{data.activiryName}}</option>
                                <!-- <option value="2">Phone</option> -->
                            </select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="popup_lastname" class="form-label"><span class="text-danger">*</span>Date</label>
                        <div class="input-group">
                            <input type="date" name="lastName" class="form-control" id="popup_lastname"
                                [(ngModel)]="leadActivityDate">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="status_type" class="form-label"><span class="text-danger">*</span>Assign To</label>
                        <div class="input-group">
                            <select class="form-select" aria-label="Default select example" id="status_type"
                                [(ngModel)]="leadActivityUser">
                                <option value="">Select an option</option>
                                <option *ngFor="let data of allUser" value="{{data.userId}}">{{data.firstName}}
                                    {{data.lastName}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <label for="address_popup" class="form-label"><span
                                class="text-danger">*</span>Description</label>
                        <div class="input-group">
                            <textarea name="Address" class="form-control" id="address_popup" rows="7"
                                [(ngModel)]="leadActivityDesc"
                                onkeypress="if(this.value.length > 100) return false;"></textarea>
                        </div>
                    </div>
                    <div class="col-md-12" style="margin-bottom: 35px;">
                        <button class="btn btn-success btn-lg btn-block" style="float: right;"
                            (click)="addLeadActivity()">Add Activity
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #leadStage>
    <!-- Modal content-->
    <div class="modal-content">
        <div class="modal-header">
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col-sm-10">
                        <h3 class="modal-title d-inline-block align-middle me-2">Update Lead Stage</h3>
                        <div class="d-inline-block align-middle">
                            <!-- <a class="btn btn-link" href="javascript:void(0)">Edit page layout</a> -->
                        </div>
                    </div>
                    <div class="col-sm-2 d-flex justify-content-end">
                        <button type="button" data-bs-dismiss="modal" aria-label="Close" class="btn-close"
                            (click)="closeModal()"></button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-body">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <label for="popup_lastname" class="form-label"><span class="text-danger">*</span>Amount</label>
                        <div class="input-group">
                            <input type="text" name="lastName" class="form-control" id="popup_lastname"
                                [(ngModel)]="StageClosingAmount">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="popup_lastname" class="form-label"><span class="text-danger">*</span>Probability
                            (%)</label>
                        <div class="input-group">
                            <input type="text" name="lastName" class="form-control" id="popup_lastname"
                                [(ngModel)]="stageCloseProbability">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="popup_lastname" class="form-label"><span class="text-danger">*</span>Expected
                            Revenue</label>
                        <div class="input-group">
                            <input type="text" name="lastName" class="form-control" id="popup_lastname"
                                [(ngModel)]="expectedRevenue">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="popup_lastname" class="form-label"><span class="text-danger">*</span>Expected
                            Closing</label>
                        <div class="input-group">
                            <input type="date" name="lastName" class="form-control" id="popup_lastname"
                                [(ngModel)]="expectedClosingAmount">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="popup_lastname" class="form-label"><span class="text-danger">*</span>Stage
                            Duration</label>
                        <div class="input-group">
                            <input type="text" name="lastName" class="form-control" id="popup_lastname"
                                [(ngModel)]="stageDuration">
                        </div>
                    </div>
                    <div class="col-md-12" style="margin-bottom: 35px;">
                        <button class="btn btn-success btn-lg btn-block" style="float: right;"
                            (click)="updateLeadStage()">Update Stage
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>


<!------------------- Final Lead Stage Change PopUp------------------------>

<ng-template #finalLeadStagePopup>
    <div class="modal-content">
        <div class="modal-header">
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col-10">
                        <h3>Mark This Stage As Completed</h3>
                    </div>
                    <div class="col-2 d-flex justify-content-end">
                        <button type="button" data-bs-dismiss="modal" aria-label="Close" class="btn-close"
                            (click)="closeModal()"></button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-body pt-2">
            <div class="container-fluid">
                <div class="row justify-content-center">
                    <h4>Present Stage Name : {{nextLeadStatusName}}</h4>
                    <div class="col-12 pt-1" *ngIf = "!nextStageDropdownFlag">
                        <label for="nextStage" class="form-label"><span class="text-danger">*</span>Next Stage</label>
                        <div class="input-group">
                            <select class="form-select" [(ngModel)] = "finalNextStageId">
                                <option value="">Select next stage</option>
                                <option *ngFor = "let item of finalLeadStageList" [value]="item.salesStageId">{{item.salesStageName}}</option>
                            </select>
                        </div>
                    </div>
                   
                    <div class="col-12 pt-1">
                        <label for="desc" class="form-label"><span class="text-danger"></span>Description
                        </label>
                        <div class="input-group">
                            <input type="text" name="desc" class="form-control" [(ngModel)]="finalDescription"
                                onkeypress="if(this.value.length > 250) return false;">
                        </div>
                    </div>
                    <div class="col-12">

                        <label for="expected_closing" class="form-label"><span class="text-danger">*</span>
                            Follow Up Date

                        </label>
                        <div class="input-group">
                            <input type="date" class="form-control" id="expected_closing"
                                [(ngModel)]="finalfollowUpdate">
                        </div>
                    </div>

                    <div class="col-12">
                        <label for="amount" class="form-label"><span class="text-danger">*</span>Amount
                        </label>
                        <div class="input-group">
                            <input type="text" name="amount" class="form-control" [(ngModel)]="finalAmount" onkeypress="if(event.which < 48 || event.which > 57 ) if(event.which != 8) if(event.keyCode != 9)  return false;">
                        </div>
                    </div>
                    <div class="col-12">
                        <label for="prob" class="form-label"><span class="text-danger"></span>Probablity Win
                            Percentage
                        </label>
                        <div class="input-group">
                            <input type="text" name="probOfWin" class="form-control" [(ngModel)]="finalProbablityWin" onkeypress="if(event.which < 48 || event.which > 57 ) if(event.which != 8) if(event.keyCode != 9)  return false;">
                        </div>
                    </div>
                    <div class="col-12">
                        <label for="expRevenue" class="form-label"><span class="text-danger">*</span>Expected revenue
                        </label>
                        <div class="input-group">
                            <input type="text" name="expRevenue" class="form-control"
                                [(ngModel)]="finalExpectedrevenue" onkeypress="if(event.which < 48 || event.which > 57 ) if(event.which != 8) if(event.keyCode != 9)  return false;">
                        </div>
                    </div>
                    <div class="col-12">

                        <label for="expected_closing" class="form-label"><span class="text-danger">*</span>
                            Expected Closing Date

                        </label>
                        <div class="input-group">
                            <input type="date" class="form-control" id="expected_closing"
                                [(ngModel)]="finalExpClosingDate">
                        </div>
                    </div>
                    <div class="col-12">
                        <label for="lead_duration" class="form-label"><span class="text-danger"></span>Stage
                            Duration(Days)</label>
                        <div class="input-group">
                            <input type="text" name="leadDuration" class="form-control" [(ngModel)]="finalStgDuration" onkeypress="if(event.which < 48 || event.which > 57 ) if(event.which != 8) if(event.keyCode != 9)  return false;">
                        </div>
                    </div>

                    <div class="col-12">
                        <h4 class="mt-4 d-block"><span class="text-danger">*</span> Mark As</h4>
                        <div class="row">
                            <div class="col-12">
                                <ul class="poptablist mb-4 mt-2">
                                    <li class="d-inline-block align-middle mark-as-complete"
                                        [ngClass]="convert == true ? 'active':''">
                                        <a id="popchildfirst" class="d-block py-2 px-3 bg-white">
                                            <div class="form-check">
                                                <label class="form-check-label" for="closed_won_list">Convert</label>
                                                <input class="form-check-input" type="checkbox" value=""
                                                    id="convert_list" [checked]="convert" (click)="selectOption(0)">
                                            </div>
                                        </a>
                                    </li>

                                    <li class="d-inline-block align-middle ms-n1 mark-as-complete"
                                        [ngClass]="disqualified == true ? 'active':''">
                                        <a id="popchildscnd" class="d-block py-2 px-3 bg-white">
                                            <div class="form-check">
                                                <label class="form-check-label"
                                                    for="disqualified_list">Disqualified</label>
                                                <input class="form-check-input" type="checkbox" value=""
                                                    id="disqualified_list" [checked]="disqualified"
                                                    (click)="selectOption(1)">
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div id="closed_won" [hidden]="!convert">
                            <div class="row">

                                <!-- <div class="col-md-12">
                                    <button class="btn btn-success" type="button" (click)="finalLeadStageSubmit()"
                                        *ngIf="!finalLeadStagePopFlag">Submit <i class="fas fa-chevron-circle-right"></i></button>
                                    <button class="btn btn-success" type="button" (click)="finalLeadStageUpdate()"
                                        *ngIf="finalLeadStagePopFlag">Update <i class="fas fa-chevron-circle-right"></i></button>
                                </div><br><br> -->
                            </div>
                        </div>




                        <div id="disqualified" [hidden]="!disqualified">
                            <div class="row">
                                <div class="col-12">
                                    <label for="lost_status" class="form-label"><span class="text-danger">*</span> Lost
                                        Status</label>
                                    <div class="input-group">
                                        <select class="form-select" aria-label="Default select example" id="lost_status"
                                            [(ngModel)]="finalLostStatus">
                                            <option value="">Select an options</option>
                                            <option [value]="1">Not possible to connect
                                            </option>
                                            <option [value]="2">Not interested</option>
                                            <option [value]="3">Contact in future</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <label for="description" class="form-label"><span
                                            class="text-danger"></span>Description</label>
                                    <div class="input-group">
                                        <textarea name="Address" class="form-control" id="description" rows="7"
                                            style="height:150px" [(ngModel)]="finalLostDescription"
                                            onkeypress="if(this.value.length > 250) return false;"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>


                    <div class="col-md-12">
                        <button class="btn btn-success" type="button" (click)="finalLeadStageSubmit()"
                            *ngIf="!finalLeadStagePopFlag">Submit <i class="fas fa-chevron-circle-right"></i></button>
                        <button class="btn btn-success" type="button" (click)="finalLeadStageUpdate()"
                            *ngIf="finalLeadStagePopFlag">Update <i class="fas fa-chevron-circle-right"></i></button>
                    </div><br><br>
                </div>
            </div>
        </div>
    </div>
</ng-template>